/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.11pre
*/
zingchart.setModule("bubble-pack"),function(){var f=function(e,a,t,n){return[e+t*Math.cos(2*n*Math.PI/360),a+t*Math.sin(2*n*Math.PI/360)]},b=function(e){return 360*e/(2*Math.PI)},C=function(e,a,t){for(var n,r=t.padding,i=0;i<a.length;i++)if(n=Math.sqrt((e.x-a[i].x)*(e.x-a[i].x)+(e.y-a[i].y)*(e.y-a[i].y)),Math.round(n-e.r-a[i].r)<0)return!1;return n=Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)),!(t.r-n-e.r<r)},U=function(e,a,t){for(var n=e.r,r=t.padding,i=!1,l=[],o=0;o<a.length;o++)for(var p=0;p<a.length;p++){var u,g,h,c,_,d=Math.sqrt((a[o].x-a[p].x)*(a[o].x-a[p].x)+(a[o].y-a[p].y)*(a[o].y-a[p].y));o!==p&&Math.floor(Math.abs(d-a[o].r-a[p].r))<=r&&(d=((n+a[p].r)*(n+a[p].r)-(n+a[o].r)*(n+a[o].r)+(d=a[o].r+a[p].r)*d)/(2*d),u=Math.sqrt((n+a[p].r)*(n+a[p].r)-d*d),c=a[o],h=a[p],g=void 0,g=[g=(c.y-h.y)/(c.x-h.x),c.y-g*c.x,Math.atan((h.y-c.y)/(h.x-c.x))],c=(h=f(a[p].x,a[p].y,d,b(g[2])))[0],_=h[1],(c<Math.min(a[o].x,a[p].x)||c>Math.max(a[o].x,a[p].x)||_<Math.min(a[o].y,a[p].y)||_>Math.max(a[o].y,a[p].y))&&(c=(h=f(a[p].x,a[p].y,d,b(g[2])+180))[0],_=h[1]),h={x:(d=f(c,_,u,b(g[2])+90))[0],y:d[1],r:n,padding:r,idx:e.idx,info:e},C(h,a,t)&&(l.push(h),i=!0),h={x:(d=f(c,_,u,b(g[2])+270))[0],y:d[1],r:n,padding:r,idx:e.idx,info:e},C(h,a,t)&&(l.push(h),i=!0))}return l.sort(function(e,a){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))-Math.sqrt((a.x-t.x)*(a.x-t.x)+(a.y-t.y)*(a.y-t.y))}),l.length&&a.push(l[0]),i},t=(zingchart.plugins.bubblepack=zingchart.plugins.bubblepack||{},zingchart.plugins.bubblepack.info=zingchart.plugins.bubblepack.info||{},zingchart.plugins.bubblepack.cache=zingchart.plugins.bubblepack.cache||{},zingchart.bind(null,"dataparse",function(e,a){for(var t,n=0,r=a[ZC._[16]].length;n<r;n++)if(a[ZC._[16]][n].type&&"bubble-pack"===a[ZC._[16]][n].type){var i,l,o,p=a[ZC._[16]][n].type,u=(a[ZC._[16]][n]["plugin-type"]=p,a[ZC._[16]][n]),g=(zingchart.normalize(u),u.type="null",{}),h=(u.options&&(g=u.options[p]||u.options),ZC._todash_(g),u[ZC._[11]]=u[ZC._[11]]||[],g["text-attr"]||"text"),c=g["value-attr"]||ZC._[9];for(u[ZC._[11]]instanceof Array||(i=[],l={},(o=function(e,a){var t=(e.text||e.name||e[h]).toLowerCase().replace(/[^a-z0-9_]+/gi,""),a=(l[t]?t+=l[t]++:l[t]=1,{id:t,text:e.text||e.name||e[h]||t,value:e[ZC._[9]]||e[ZC._[21]]||e[c],parent:a||""});if(i.push(a),e.children)for(var n=0;n<e.children.length;n++)o(e.children[n],t)})(u[ZC._[11]]),u[ZC._[11]]=i),f=0;f<u[ZC._[11]].length;f++)u[ZC._[11]][f].text=u[ZC._[11]][f].text||u[ZC._[11]][f].name||u[ZC._[11]][f][h],u[ZC._[11]][f][ZC._[9]]=u[ZC._[11]][f][ZC._[9]]||u[ZC._[11]][f][ZC._[21]]||u[ZC._[11]][f][c];var _=g["group-filter"]||[];for(zingchart.plugins.bubblepack.info.groups=zingchart.plugins.bubblepack.info.groups||{},zingchart.plugins.bubblepack.info.size=zingchart.plugins.bubblepack.info.size||{},zingchart.plugins.bubblepack.info.size[e.id]=u[ZC._[11]].length,zingchart.plugins.bubblepack.info.groups[e.id]={},f=0;f<_.length;f++)zingchart.plugins.bubblepack.info.groups[e.id][_[f]]=f;for(var d=_.length,f=0;f<u[ZC._[11]].length;f++)if(u[ZC._[11]][f].group&&null===ZC._n_(zingchart.plugins.bubblepack.info.groups[e.id][u[ZC._[11]][f].group])&&(zingchart.plugins.bubblepack.info.groups[e.id][u[ZC._[11]][f].group]=d++),null!==ZC._n_(u[ZC._[11]][f].parent))for(v=0;v<u[ZC._[11]].length;v++)u[ZC._[11]][v].id===u[ZC._[11]][f].parent&&(u[ZC._[11]][f].pidx=v,u[ZC._[11]][v].children=u[ZC._[11]][v].children||[],u[ZC._[11]][v].children.push(f));for(var b=!0,C=[];b;)for(b=!1,f=0;f<u[ZC._[11]].length;f++)if(null!==ZC._n_(u[ZC._[11]][f].parent)&&(t=u[ZC._[11]][f].parent,-1===ZC.AV(C,t))){for(var s=0,Z=!0,x=-1,v=0;v<u[ZC._[11]].length;v++)u[ZC._[11]][v].id===t&&(x=v,u[ZC._[11]][f].pidx=v),null!==ZC._n_(u[ZC._[11]][v].parent)&&u[ZC._[11]][v].parent===t&&(null!==ZC._n_(u[ZC._[11]][v][ZC._[9]])?s+=ZC._f_(u[ZC._[11]][v][ZC._[9]]):Z=!1);Z&&-1!==x&&(u[ZC._[11]][x][ZC._[9]]=s,C.push(t),b=!0)}for(var m=!0;m;)for(m=!1,f=0;f<u[ZC._[11]].length;f++)null===ZC._n_(u[ZC._[11]][f].level)&&(null===ZC._n_(u[ZC._[11]][f].parent)||""===u[ZC._[11]][f].parent?u[ZC._[11]][f].level=0:(x=u[ZC._[11]][f].pidx,null!==ZC._n_(x)&&(null===ZC._n_(u[ZC._[11]][x].level)?m=!0:u[ZC._[11]][f].level=ZC._i_(u[ZC._[11]][x].level)+1)));u.plotarea=u.plotarea||{},ZC._inj_(u.plotarea,{margin:"40 10 10 10","mask-tolerance":[0,0]})}return a}),function(e){var a,t,n,r,i,l,o=zingchart.getLoader(e.loader.id),p=zingchart.getGraph(o,e.graphid),u=p.o;if("bubble-pack"===u["plugin-type"]){var g=zingchart.getGraphInfo(o,u,p.K).plotarea,h=(u.shapes=u.shapes||[],{});if(u.options&&(h=u.options["bubble-pack"]||u.options),ZC._todash_(h),!e.shape||null===ZC._n_(h.active)||ZC._b_(h.active)){var c=h.palette||["#FFEC94","#FFAEAE","#B0E57C","#B4D8E7","#FCCB8E"],_=u[ZC._[11]]||[],d=ZC._f_(ZC._c_(h.padding,1)),f=ZC._i_(ZC._c_(h["min-level"],0)),j=ZC._i_(ZC._c_(h["max-items"],999)),b=h.filter||[],C=h["group-filter"]||[],s=ZC._f_(ZC._c_(h["min-size"],1.5)),Z=h.containers||{},B=h.format||{},o=[].concat(b),p=f,x=e["data-top"]||"";if(""===x){for(var R="",V=0,v=0;v<_.length;v++)_[v].parent&&""!==_[v].parent||(R=_[v].id,V++);1===V&&(x=R)}null!==ZC._n_(e["data-level"])&&(f=e["data-level"],x===e["data-id"]&&f--),null!==ZC._n_(e["data-id"])&&(x=x===e["data-id"]?(b=[e["data-parent"]],e["data-parent"]):(b=[e["data-id"]],e["data-id"])),f<p&&(f=p,b=[].concat(o));var m,y=[],G=ZC._i_(g.x+g.width/2),L=ZC._i_(g.y+g.height/2),O=ZC._i_(Math.min(g.width/2,g.height/2)),z=0;for(v=0;v<_.length;v++)z=Math.max(z,_[v].level);ZC._n_(h["max-level"])&&(z=ZC._i_(h["max-level"]));for(var D,M,k=f;k<=z;k++){for(m={},v=0;v<_.length;v++)_[v].level===k&&(M=_[v].parent||"0",m[M=k===f?Z[D=_[v].id]?D:"0":M]=m[M]||[],(!b.length||_[v].level!==f||b.length&&-1!==ZC.AV(b,_[v].id))&&(""===_[v].group||!C.length||C.length&&-1!==ZC.AV(C,_[v].group))&&m[M].push(_[v]));for(M in m){var N=x+"/"+M+"/"+f+"/"+z;if(m[M].length){if(k===f)Z[M]?(t=Z[M],n=g,l=i=r=void 0,(r=ZC.IK(t.x||"0",!1))<=1&&(r=n.x+n.width*r),(i=ZC.IK(t.y||"0",!1))<=1&&(i=n.y+n.height*i),(l=ZC.IK(t[ZC._[19]]||"0",!1))<=1&&(l=n.width*l),(t=ZC.IK(t[ZC._[20]]||"0",!1))<=1&&(t=n.height*t),n=Math.min(l,t)/2,(I={x:r+l/2,y:i+t/2,r:n}).padding=d,I.minSize=s,I.uid=""):I={uid:N,x:G,y:L,r:O,level:k,maxItems:j,minSize:s,padding:d};else for(var I=null,w=0;w<y.length;w++)y[w].info.id===M&&(I={uid:N,x:y[w].x,y:y[w].y,r:y[w].r,level:k,maxItems:j,minSize:s,padding:d});I&&(y=y.concat(function(e,a,t){if(""!==a.uid&&zingchart.plugins.bubblepack.cache[a.uid])return zingchart.plugins.bubblepack.cache[a.uid];for(var n=a.r,r=a.x,i=a.y,l=a.padding,o=a.maxItems||999,p=a.minSize||1.5,u=zingchart.plugins.bubblepack.info.groups[t]||{},g=(e.sort(function(e,a){return!e.group||!a.group||e.group===a.group?parseFloat(a[ZC._[9]])-parseFloat(e[ZC._[9]]):null!==ZC._n_(u[e.group])&&null!==ZC._n_(u[a.group])?u[e.group]-u[a.group]:e.group<a.group?1:e.group>a.group?-1:0}),Math.min(o,e.length)),h=0,c=0;c<g;c++)e[c].r=e[c]._r_=Math.sqrt(parseFloat(e[c][ZC._[9]])/Math.PI)+l/2,e[c].idx=c,h+=e[c].r*e[c].r*Math.PI;for(var _=1,d=(_=1<g?g<25?Math.max(1e-4,(n-3*l)/(e[0].r+e[1].r)):(t=.8,t=50<=g&&g<75?.85:75<=g&&g<100?.9:100<=g&&g<150?.95:1,Math.max(1e-4,Math.sqrt(t*n*n*Math.PI/h))):(0===l&&(a.padding=l=1),Math.max(1e-4,(n-2*l)/e[0].r)))/150,f=1,b=(25<g&&g<=50?(d=_/125,f=1):50<g&&g<=100?(d=_/100,f=1.125):100<g&&g<=200?(d=_/75,f=1.25):200<g&&(d=_/50,f=1.5),[]),C=!0;C;){for(C=!1,c=0;c<g;c++)e[c].r=e[c]._r_*_;if(b=[],1<g)if(2*e[0].r+2*e[1].r+3*l>2*n)0<(_-=d)&&(C=!0);else{var s=e[0].r+e[1].r+l/2;for(b.push({x:r-s+e[0].r,y:i,r:e[0].r,idx:0,info:e[0]}),b.push({x:r+s-e[1].r,y:i,r:e[1].r,idx:1,info:e[1]}),c=2;c<g;c++)if(e[c].r>=p)if(!U(e[c],b,a)){var Z=c/g,x=1;if(100<g&&(0<=Z&&Z<.1?x=1.2:.1<=Z&&Z<.2?x=1.15:.2<=Z&&Z<.3?x=1.1:.3<=Z&&Z<.4&&(x=1.05),d+=x*f*d*(1-Z)),0<(_-=d)){C=!0;break}}}else b.push({x:r,y:i,r:e[0].r-l,idx:0,info:e[0]})}return""!==a.uid&&(zingchart.plugins.bubblepack.cache[a.uid]=b),b}(m[M],I,e.id)))}}}var Q=[];for(v=0;v<y.length;v++){var E=y[v].r-d/2;if(s<=E){var q,A=y[v].info,F=zingchart.formatNumber(A.value,B),A=A.text||"",T=A,X=F,P=Math.min(29,Math.floor(2*E*1.45/Math.max(3,A.length))),H=(P<9&&(A=A.substring(0,3)+"...",(P=Math.min(29,Math.floor(2*E*1.45/Math.max(3,A.length))))<9&&(F=A="")),Math.min(19,Math.floor(2*E*.75/Math.max(3,F.length)))),J=(H<9&&(F=""),E<10&&(A=F=""),c[y[v].info.level%c.length]),K=(y[v].info.group&&(J=null!==ZC._n_(a=zingchart.plugins.bubblepack.info.groups[e.id][y[v].info.group])?c[(y[v].info.level+a)%c.length]:"#"+ZC.XQ.md5(y[v].info.group).substring(0,6)),{type:"circle",id:"bp_"+y[v].info.id,"data-id":y[v].info.id,"data-level":y[v].info.level,"data-parent":y[v].info.parent,"data-top":x,cls:"bp_item","border-width":1,"border-color":"#999","background-color":J,alpha:1,"text-align":"center",cursor:"hand",size:E,x:y[v].x,y:y[v].y,"hover-state":{"border-width":1,"border-color":"#000","background-color":"none"},label:{text:""},tooltip:{text:"%fullname<br>%fullvalue"}}),S=(y[v].info.children&&0!==y[v].info.children.length&&y[v].info.level!==z||(K.label={text:'<span style="font-size:'+P+'px">%name</span><br><span style="font-size:'+H+'px">%value</span>'}),ZC._cp_(h.item,K),ZC._cp_(h["item-level-"+y[v].info.level],K),ZC._cp_(h["item-group-"+y[v].info.group],K),ZC._cp_(h["item-id-"+y[v].info.id],K),null);for(q in K.label.text=K.label.text.replace(/%fullname/g,T).replace(/%name/g,A).replace(/%fullvalue/g,X).replace(/%value/g,F),K.tooltip.text=K.tooltip.text.replace(/%fullname/g,T).replace(/%name/g,A).replace(/%fullvalue/g,X).replace(/%value/g,F),y[v].info)0===q.indexOf("data-")&&(S=new RegExp("%"+q,"g"),K.label.text=K.label.text.replace(S,y[v].info[q]),K.tooltip.text=K.tooltip.text.replace(S,y[v].info[q]));S=new RegExp("%data-([a-zA-Z0-9]+)","g"),K.label.text=K.label.text.replace(S,""),K.tooltip.text=K.tooltip.text.replace(S,""),S=new RegExp("<br><span(.+?)></span>","g"),K.label.text=K.label.text.replace(S,""),Q.push(K)}}zingchart.exec(e.id,"removeobject",{type:"shape",cls:"bp_item"}),zingchart.exec(e.id,"addobject",{type:"shape",data:Q})}}});zingchart.bind(null,"gcomplete",function(e){t(e)}),zingchart.bind(null,"shape_click",function(e){for(var a in ZC.cache.data)-1!==a.indexOf("area-score-"+e.id)&&delete ZC.cache.data[a];500<zingchart.plugins.bubblepack.info.size[e.id]&&zingchart.exec(e.id,"disable",{}),window.setTimeout(function(){t(e),zingchart.exec(e.id,"enable",{})},1)}),zingchart.extendAPI("bubblepack.setdata",function(e,a){zingchart.plugins.bubblepack.cache={},zingchart.plugins.bubblepack.info.groups[e]={},zingchart.plugins.bubblepack.info.size[e]={},zingchart.exec(e,"setdata",{data:a.data||{}})})}();