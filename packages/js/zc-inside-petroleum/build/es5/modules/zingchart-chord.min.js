/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.11pre
*/
zingchart.setModule("chord"),function(){ZC.AFV=((l=function(){this.AF9="palette",this.C2="#6a921f",this.BP=[],this.T0=.8,this.AFA=.1,this.AFB=0,this.AFC=5,this.iGroupPadding=10,this.iGroupOffset=0,this.JF=1,this.K8=!1,this.fBandAlpha=.75,this.fChordAlpha=.75,this.iHoverEffect=1,this.AGQ=function(){for(var t=(16777215*Math.random()+1<<0).toString(16);t.length<6;)t="0"+t;return"#"+t}}).getDefaults=function(t){var e={};return ZC._cp_(l.B8,e),l.NQ[t]&&ZC._cp_(l.NQ[t],e),e},l.B8={palette:[],"border-color-1":"#999","border-color-2":"#666",alpha:.75,tick:{"line-color":"#666",flat:!0,"line-width":1},item:{color:"#333","offset-r":0},label:{"auto-align":!0,color:"#333","offset-r":0},"value-box":{visible:!1}},l.NQ={light:{palette:[["#7CA82B","#7CA82B","#638F12"],["#29A2CC","#29A2CC","#1089B3"],["#D31E1E","#D31E1E","#BA0505"],["#EF8535","#EF8535","#D66C1C"],["#A05F18","#A05F18","#874600"],["#265E96","#265E96","#0D457D"],["#6B7075","#6B7075","#52575C"]],"border-color-1":"#000","border-color-2":"#fff",alpha:1,tick:{"line-color":"#666"}},dark:{palette:[["#7CA82B","#7CA82B","#638F12"],["#29A2CC","#29A2CC","#1089B3"],["#D31E1E","#D31E1E","#BA0505"],["#EF8535","#EF8535","#D66C1C"],["#A05F18","#A05F18","#874600"],["#265E96","#265E96","#0D457D"],["#6B7075","#6B7075","#52575C"]],"border-color-1":"#221F1F","border-color-2":"#221F1F",alpha:1,tick:{"line-color":"#58595B"},item:{color:"#fff"},label:{color:"#D1D3D4"}}},l);var l,Kt={},Tt={},Rt=null,Jt=null,Ut=-1,Xt=-1,t=function(t){var e,l,_=zingchart.getLoader(t.id);!_||(e=zingchart.getGraph(_,t.graphid))&&"chord"===e.o.type&&Kt["chord-"+t.id+"-"+t.graphidx]&&(Tt["chord-"+t.id+"-"+t.graphidx]=Tt["chord-"+t.id+"-"+t.graphidx]||[],e=Tt["chord-"+t.id+"-"+t.graphidx],-1!==(l=ZC.AV(e,t.plotindex))?e.splice(l,1):e.push(t.plotindex),_.K7())};zingchart.bind(null,"legend_item_click",t),zingchart.bind(null,"legend_marker_click",t),zingchart.bind(null,"shape_mouseover",function(t){var e=zingchart.getLoader(t.id);if(e){e=zingchart.getGraph(e,t.graphid);if(e&&"chord"===e.o.type){var l=Kt["chord-"+t.id+"-"+t.graphidx];if(l&&!l.K8&&"segment_"===t.shapeid.substring(0,8)){for(var _=ZC._i_(t.shapeid.replace("segment_","")),n=[],a=0;a<Ut;a++){for(var o=0;o<Xt;o++)1!==l.iHoverEffect&&2!==l.iHoverEffect||n.push({id:"chord_"+a+"_"+o,alpha:l.fChordAlpha*(_===a||_===o?1:.25)});2===l.iHoverEffect&&n.push({id:"segment_"+a,alpha:l.fBandAlpha*(_===a?1:.25)})}0!==l.iHoverEffect&&zingchart.exec(t.id,"updateobject",{type:"shape",graphid:t.graphid,dynamic:!0,data:n})}}}}),zingchart.bind(null,"shape_mouseout",function(t){var e=zingchart.getLoader(t.id);if(e){e=zingchart.getGraph(e,t.graphid);if(e&&"chord"===e.o.type){var l=Kt["chord-"+t.id+"-"+t.graphidx];if(l&&!l.K8&&"segment_"===t.shapeid.substring(0,8)){for(var _=[],n=0;n<Ut;n++){for(var a=0;a<Xt;a++)1!==l.iHoverEffect&&2!==l.iHoverEffect||_.push({id:"chord_"+n+"_"+a,alpha:l.fChordAlpha});2===l.iHoverEffect&&_.push({id:"segment_"+n,alpha:l.fBandAlpha})}0!==l.iHoverEffect&&zingchart.exec(t.id,"updateobject",{type:"shape",graphid:t.graphid,dynamic:!0,data:_})}}}}),zingchart.bind(null,"dataparse",function(O,P){for(var t,H=zingchart.getLoader(O.id),e=(zingchart.initThemes(H),ZC.AFV.getDefaults(O.theme)),l=0,Q=P[ZC._[16]].length;l<Q;l++)if("chord"===P[ZC._[16]][l].type){var _=P[ZC._[16]][l].type,n=P[ZC._[16]][l],a={},o=(n.options&&(a=n.options[_]||n.options),ZC._todash_(a),null!==ZC._n_(Rt)&&(n.shapes=[],ZC._cpa_(Rt,n.shapes)),null!==ZC._n_(Jt)&&(n[ZC._[10]]=[],ZC._cpa_(Jt,n[ZC._[10]])),new ZC.AFV),r=(Kt["chord-"+O.id+"-"+l]=o,null!==ZC._n_(t=a["color-type"])&&(o.AF9=t),null!==ZC._n_(t=a.color)&&(o.C2=ZC.AQ.GC(t)),null!==ZC._n_(t=a["hover-effect"])&&(o.iHoverEffect=ZC._i_(t)),null!==ZC._n_(t=a.palette)?o.BP=t:0<e.palette.length&&(o.BP=e.palette),null!==ZC._n_(t=a.radius)&&(o.T0=ZC._f_(ZC.IK(t))),null!==ZC._n_(t=a["band-width"])&&(o.AFA=ZC._f_(ZC.IK(t))),null!==ZC._n_(t=a["band-space"])&&(o.AFB=ZC._f_(ZC.IK(t))),null!==ZC._n_(t=a["angle-padding"])&&(o.AFC=ZC._i_(t)),null!==ZC._n_(t=a["group-padding"])&&(o.iGroupPadding=ZC._i_(t)),null!==ZC._n_(t=a["group-offset"])&&(o.iGroupOffset=ZC._i_(t)),null!==ZC._n_(t=a["size-factor"])&&(o.JF=ZC._f_(t)),null!==ZC._n_(t=a.flat)&&(o.K8=ZC._b_(t)),n[ZC._[11]]);for(u=0;u<r.length;u++)r[u]["sort-index"]=u;var I=[],_=(r.sort(function(t,e){return null!==ZC._n_(t.group)&&-1===ZC.AV(I,ZC._i_(t.group))&&I.push(ZC._i_(t.group)),null!==ZC._n_(e.group)&&-1===ZC.AV(I,ZC._i_(e.group))&&I.push(ZC._i_(e.group)),null!==ZC._n_(t.group)&&null!==ZC._n_(e.group)&&ZC._i_(t.group)-ZC._i_(e.group)!=0?ZC._i_(t.group)-ZC._i_(e.group):t["sort-index"]-e["sort-index"]}),ZC.BQ(I.length,1)),C=Tt["chord-"+O.id+"-"+l]||[],i=C.length,L=0;for(u=0,s=r.length;u<s;u++)if(0===i||0<i&&-1===ZC.AV(C,u))for(d=0,lt=(tt=r[u][ZC._[5]]||[]).length;d<lt;d++)(0===i||0<i&&-1===ZC.AV(C,d))&&(L+=ZC._f_(tt[d]));var K=0;for(u=0,s=r.length;u<s;u++)(0===i||0<i&&-1===ZC.AV(C,u))&&K++;if(-1===Ut&&(Ut=r.length),-1===Xt)for(u=0,s=r.length;u<s;u++)tt=r[u][ZC._[5]]||[],Xt=ZC.BQ(Xt,tt.length);n.shapes||(n.shapes=[]),Rt||(Rt=[],ZC._cpa_(n.shapes,Rt));var Z,T,R,J,p=n.shapes,U=(n[ZC._[10]]||(n[ZC._[10]]=[]),Jt||(Jt=[],ZC._cpa_(n[ZC._[10]],Jt)),n[ZC._[10]]),X=(n.legend&&(n.legend[ZC._[54]]="none"),360-o.AFC*K-o.iGroupPadding*(1<_?_:0)),h=[],j=[],Y=[],S=0,q=0,W=null,$=!1;for(u=0,s=r.length;u<s;u++){ZC._todash_(r[u]),_t=1,null!==ZC._n_(r[u].group)&&(_t=ZC._i_(r[u].group)),$=!1,q=0,null===W&&null!==ZC._n_(r[u].group)?W=ZC._i_(r[u].group):ZC._i_(r[u].group)!==W&&(W=ZC._i_(r[u].group),$=!0),$&&0<u&&(q=o.iGroupPadding);var c=o.C2;if("palette"===o.AF9?c=0<o.BP.length?o.BP[u%o.BP.length]:zingchart.getPalette(H,u,"bar")[1]:"random"===o.AF9&&(c=o.AGQ()),0===i||0<i&&-1===ZC.AV(C,u)){null===ZC._n_(r[u][ZC._[0]])&&(r[u][ZC._[0]]=c),r[u].visible=!0;for(var tt,g={},et=0,d=0,lt=(tt=r[u][ZC._[5]]||[]).length;d<lt;d++)(0===i||0<i&&-1===ZC.AV(C,d))&&(et+=ZC._f_(tt[d]));for(N in g[ZC._[1]]=S+q,g[ZC._[2]]=g[ZC._[1]]+X*et/L,g.group=_t,g.total=et,g[ZC._[5]]=r[u][ZC._[5]],r[u])"data-"===N.substr(0,5)&&(g[N]=r[u][N]);S=g[ZC._[2]]+o.AFC,h.push(g);var c=zingchart.getInstance(H,"style"),_t=(c.append(r[u]),c.parse(),j[u]=c,n.legend&&ZC._cp_({"legend-marker":{alpha:.75,"background-color-1":c.A0,"background-color-2":c.AE}},r[u]),D={"background-color":"#fff",color:"#333","border-width":1,"border-color":e["border-color-1"],padding:10},null!==ZC._n_(a.style)&&null!==ZC._n_(t=a.style.tooltip)&&ZC._cp_(t,D),r[u].text||""),c=(D.text=_t,{alpha:e.alpha,"border-width":0,"background-color":c.A0+" "+c.AE,tooltip:D});null!==ZC._n_(a.style)&&null!==ZC._n_(t=a.style.band)&&ZC._cp_(t,c),null!==ZC._n_(r[u].style)&&null!==ZC._n_(t=r[u].style.band)&&ZC._cp_(t,c),ZC._cp_({type:"pie",id:"segment_"+u,"angle-start":g[ZC._[1]],"angle-end":g[ZC._[2]]},c),c.tooltip.text=c.tooltip.text.replace(/%text/gi,_t),o.fBandAlpha=c.alpha||.75,Y.push(c)}else r[u].visible=!1,h.push(null),Y.push(null)}var nt=0;if(1<_){for(var at=Number.MAX_VALUE,ot=-Number.MAX_VALUE,u=0,s=h.length;u<s;u++)1===h[u].group&&(at=Math.min(at,h[u][ZC._[1]]),ot=Math.max(ot,h[u][ZC._[2]]));nt=(ot-at)/2}for(nt+=o.iGroupOffset,u=0,s=h.length;u<s;u++)h[u]&&Y[u]&&(h[u][ZC._[1]]-=nt,h[u][ZC._[2]]-=nt,Y[u][ZC._[1]]-=nt,Y[u][ZC._[2]]-=nt,p.push(Y[u]));var rt,Ct,f=Number.MAX_VALUE;if(0!==L){for(u=0,s=h.length;u<s;u++)!(0===i||0<i&&-1===ZC.AV(C,u))||0<(Ct=Math.pow(10,Math.floor(Math.log(h[u].total)/Math.LN10)))&&(f=ZC.CY(f,Ct));for(;;){if((rt=X*f/L)<15)break;f/=2}}else f=1;var A,x,b,it,v,Zt=Math.min(0,Math.ceil(Math.log(f)/Math.LN10)+1),pt=0,ht=0;for(u=0,s=h.length;u<s;u++)if(0===i||0<i&&-1===ZC.AV(C,u))for(E=0,yt=ZC.BQ(1,Math.floor(10/rt)),M=h[u][ZC._[1]];M<h[u][ZC._[2]];M+=rt)E%yt==0&&(b=(A=E*f).toFixed(Zt),1e3<=A&&(b=A/1e3+"k"),1e6<=A&&(b=A/1e6+"M"),x={},ZC._cp_(e.item,x),null!==ZC._n_(a.style)&&null!==ZC._n_(t=a.style.item)&&ZC._cp_(t,x),null!==ZC._n_(r[u].style)&&null!==ZC._n_(t=r[u].style.item)&&ZC._cp_(t,x),x.text=b,ZC._todash_(x),(it=zingchart.getInstance(H,"textbox")).append(x),it.parse(),ht=Math.max(ht,it.DV),pt=Math.max(pt,it.I)),E++;var y,ct=0,gt=0,dt=0;for(u=0;u<r.length;u++)b=r[u].text||"",y={},ZC._cp_(e.label,y),null!==ZC._n_(a.style)&&null!==ZC._n_(t=a.style.label)&&ZC._cp_(t,y),null!==ZC._n_(r[u].style)&&null!==ZC._n_(t=r[u].style.label)&&ZC._cp_(t,y),y.text=b,ZC._todash_(y),(v=zingchart.getInstance(H,"textbox")).append(y),v.parse(),dt=Math.max(dt,v.DV),ct=Math.max(ct,v.I),gt=Math.max(gt,v.F);if(n.plotarea)for(var ut=["margin",ZC._[57],ZC._[58],ZC._[59],ZC._[60]],st=0;st<ut.length;st++)"dynamic"===n.plotarea[ut[st]]&&(0===v.AA?n.plotarea[ut[st]]=pt+ht+gt-20:n.plotarea[ut[st]]=pt+ht+ct-20);var ft,_=zingchart.getGraphInfo(H,P,l),At=_.plotarea.x+_.plotarea.width/2,xt=_.plotarea.y+_.plotarea.height/2,B=_.graph.x+At,F=_.graph.y+xt,m=1<o.T0?ZC._i_(o.T0):ZC._i_(o.T0*ZC.CY(_.plotarea.width/2,_.plotarea.height/2));for(m*=o.JF,ft=1<o.AFA?m-ZC._i_(o.AFA):ZC._i_((1-o.AFA)*m),o.AFB<1&&(o.AFB=ZC._i_(o.AFB*m)),u=0,s=p.length;u<s;u++)p[u].id&&0===p[u].id.indexOf("segment_")&&(p[u].x=At,p[u].y=xt,p[u][ZC._[21]]=m,p[u][ZC._[8]]=ft);for(u=0,s=h.length;u<s;u++)if(0===i||0<i&&-1===ZC.AV(C,u)){for(var E=0,bt=[],z={},vt=(ZC._cp_(e.tick,z),null!==ZC._n_(a.style)&&null!==ZC._n_(t=a.style.tick)&&ZC._cp_(t,z),null!==ZC._n_(r[u].style)&&null!==ZC._n_(t=r[u].style.tick)&&ZC._cp_(t,z),z[ZC._[21]]||5),yt=ZC.BQ(1,Math.floor(10/rt)),Bt=30,M=h[u][ZC._[1]];M<h[u][ZC._[2]];M+=rt){var Ft=ZC.AO.BN(B,F,m,M+.1),mt=ZC.AO.BN(B,F,m+vt,M+.1);bt.push(Ft,mt,null),E%yt==0&&(b=(A=E*f).toFixed(Zt),1e3<=A&&(b=A/1e3+"k"),1e6<=A&&(b=A/1e6+"M"),T="left",90<(Z=M)&&M<270&&(Z=M-180,T="right"),x={},ZC._cp_(e.item,x),null!==ZC._n_(a.style)&&null!==ZC._n_(t=a.style.item)&&ZC._cp_(t,x),null!==ZC._n_(r[u].style)&&null!==ZC._n_(t=r[u].style.item)&&ZC._cp_(t,x),Bt=x[ZC._[19]]||pt,J=ZC._i_(x["offset-r"]||"0"),R=ZC.AO.BN(At,xt,m+vt+J+Bt/2,M+.1),ZC._cp_({anchor:"c",flat:!0,x:ZC._i_(R[0]),y:ZC._i_(R[1]),width:Bt,angle:Z,"text-align":T,text:b},x),typeof x.visible!==ZC._[31]&&!ZC._b_(x.visible)||U.push(x)),E++}ZC._cp_({type:"line",id:"ticks"+u,points:bt},z),typeof z.visible!==ZC._[31]&&!ZC._b_(z.visible)||p.push(z),(Z=M=(h[u][ZC._[1]]+h[u][ZC._[2]])/2)<0&&(M+=360),M%=360,T="center",0===v.AA?0<=M&&M<=180?Z-=90:Z+=90:0<=M&&M<=90||270<=M&&M<=360?Z-=90:Z+=90;var z={},Et=(ZC._cp_(e[ZC._[17]],z),null!==ZC._n_(n.plot)&&null!==ZC._n_(t=n.plot[ZC._[17]])&&ZC._cp_(t,z),null!==ZC._n_(t=r[u][ZC._[17]])&&ZC._cp_(t,z),ZC.AO.BN(B,F,(m+ft)/2,(h[u][ZC._[1]]+h[u][ZC._[2]])/2)),zt=Z;null===ZC._n_(z.angle)&&null===ZC._n_(z["font-angle"])||(z["auto-align"]?null!==ZC._n_(z.angle)?zt+=ZC._f_(z.angle):zt+=ZC._f_(z["font-angle"]):zt=null!==ZC._n_(z.angle)?ZC._f_(z.angle):ZC._f_(z["font-angle"])),ZC._cp_({id:"vbox_"+u,anchor:"c",angle:zt,x:Et[0],y:Et[1],flat:!0},z),z.text=z.text||"%node-value",z.text=z.text.replace(/%plot-text/gi,r[u].text||"").replace(/%node-value/gi,h[u].total),typeof z.visible!==ZC._[31]&&!ZC._b_(z.visible)||U.push(z),y={},ZC._cp_(e.label,y),null!==ZC._n_(a.style)&&null!==ZC._n_(t=a.style.label)&&ZC._cp_(t,y),null!==ZC._n_(r[u].style)&&null!==ZC._n_(t=r[u].style.label)&&ZC._cp_(t,y),zt=y[ZC._[19]]||ct,Et=y[ZC._[20]]||gt,z=ZC._i_(y["offset-r"]||"0"),null===ZC._n_(y.angle)&&null===ZC._n_(y["font-angle"])||(y["auto-align"]?(null!==ZC._n_(y.angle)?Z+=ZC._f_(y.angle):Z+=ZC._f_(y["font-angle"]),0!==v.AA&&(T=0<=M&&M<=90||270<=M&&M<=360?"left":"right")):Z=null!==ZC._n_(y.angle)?ZC._f_(y.angle):ZC._f_(y["font-angle"])),R=0===v.AA?ZC.AO.BN(At,xt,m+vt+J+Bt+z+Et,M):ZC.AO.BN(At,xt,m+vt+J+Bt+z+zt/2,M),ZC._cp_({anchor:"c",flat:!0,x:ZC._i_(R[0]),y:ZC._i_(R[1]),width:zt,angle:Z,"font-angle":Z,"text-align":T,text:r[u].text},y),typeof y.visible!==ZC._[31]&&!ZC._b_(y.visible)||U.push(y)}var Mt=ft-o.AFB;for(u=0,s=h.length;u<s;u++)if(0===i||0<i&&-1===ZC.AV(C,u))for(d=0,lt=h.length;d<s;d++)if(0===i||0<i&&-1===ZC.AV(C,d)){for(var Vt=0,kt=0,V=0;V<d;V++)(0===i||0<i&&-1===ZC.AV(C,V))&&(typeof h[u][ZC._[5]][V]===ZC._[31]&&(h[u][ZC._[5]][V]=0),Vt+=h[u][ZC._[5]][V]);for(V=0;V<u;V++)(0===i||0<i&&-1===ZC.AV(C,V))&&(typeof h[d][ZC._[5]][V]===ZC._[31]&&(h[d][ZC._[5]][V]=0),kt+=h[d][ZC._[5]][V]);var Dt=0,wt=(typeof h[u][ZC._[5]][d]!==ZC._[31]&&(Dt=h[u][ZC._[5]][d]),0),Nt=(typeof h[d][ZC._[5]][u]!==ZC._[31]&&(wt=h[d][ZC._[5]][u]),h[u][ZC._[1]]+(h[u][ZC._[2]]-h[u][ZC._[1]])*Vt/h[u].total),Gt=Nt+(h[u][ZC._[2]]-h[u][ZC._[1]])*Dt/h[u].total,Ot=h[d][ZC._[1]]+(h[d][ZC._[2]]-h[d][ZC._[1]])*kt/h[d].total,Pt=Ot+(h[d][ZC._[2]]-h[d][ZC._[1]])*wt/h[d].total,k=(0===h[u].total&&(Nt=h[u][ZC._[1]],Gt=h[u][ZC._[2]]),0===h[d].total&&(Ot=h[d][ZC._[1]],Pt=h[d][ZC._[2]]),ZC.AO.BN(B,F,Mt,Nt)),Ht=ZC.AO.BN(B,F,Mt,Ot),D={"background-color":"#fff",color:"#333","border-width":1,"border-color":e["border-color-1"],padding:10},Qt=(null!==ZC._n_(a.style)&&null!==ZC._n_(t=a.style.tooltip)&&ZC._cp_(t,D),r[u].text||""),It=r[d].text||"",w={},Lt=[];if(u===d?(D.text=Qt+":"+h[u][ZC._[5]][d],Lt=[[k[0],k[1]],[B,F,Mt,Nt,Gt,0],[B,F,k[0],k[1]]]):u<=d&&(D.text=Qt+" -> "+It+":"+h[u][ZC._[5]][d]+"<br>"+It+" -> "+Qt+":"+h[d][ZC._[5]][u],Lt=[[k[0],k[1]],[B,F,Mt,Nt,Gt,0],[B,F,Ht[0],Ht[1]],[B,F,Mt,Ot,Pt,0],[B,F,k[0],k[1]]]),0<Lt.length){var N,Nt=wt<=Dt?u:d,G=(ZC._cp_({"background-color":j[Nt].A0+" "+j[Nt].AE,alpha:.75,"border-width":1,"border-color":e["border-color-2"],tooltip:D},w),null!==ZC._n_(a.style)&&null!==ZC._n_(t=a.style.chord)&&ZC._cp_(t,w),null!==ZC._n_(r[u].style)&&null!==ZC._n_(t=r[u].style.chord)&&ZC._cp_(t,w),ZC._cp_({type:"poly",id:"chord_"+u+"_"+d,dynamic:!0,"fast-vector-path":!0,points:Lt},w),o.fChordAlpha=w.alpha||.75,u!==d&&null!==ZC._n_(t=w.tooltip["text-chord"])&&(w.tooltip.text=t),w.tooltip.text=w.tooltip.text.replace(/%text-destination/gi,It).replace(/%value-destination/gi,h[d][ZC._[5]][u]).replace(/%text-source/gi,Qt).replace(/%value-source/gi,h[u][ZC._[5]][d]).replace(/%text/gi,Qt).replace(/%value/gi,h[u][ZC._[5]][d]),null);for(N in h[u])"data-"===N.substr(0,5)&&(G=new RegExp("%"+N+"-destination","g"),w.tooltip.text=w.tooltip.text.replace(G,h[u][N][d]||""));for(N in h[d])"data-"===N.substr(0,5)&&(G=new RegExp("%"+N+"-source","g"),w.tooltip.text=w.tooltip.text.replace(G,h[d][N][u]||""));G=new RegExp("%data-([a-zA-Z0-9]+)-(source|destination)","g"),w.tooltip.text=w.tooltip.text.replace(G,""),G=new RegExp("%data-([a-zA-Z0-9]+)","g"),w.tooltip.text=w.tooltip.text.replace(G,""),typeof w.visible!==ZC._[31]&&!ZC._b_(w.visible)||0===Dt&&0===wt||p.push(w)}}}return P})}();