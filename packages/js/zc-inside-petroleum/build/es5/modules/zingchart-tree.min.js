/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.11pre
*/
zingchart.setModule("tree"),function(){var Ye,Fe,Oe,Be,l,t;function qe(e){for(var t,i=[],n={},r=0;r<e.length;r++){var a,l,c,d,o=e[r],h=!0===o.visible;(o["start-point"]||o["end-point"])&&(c=(l=g(o.points))[0],d=l[1],a=l[2],l=l[3],c={specs:o["start-point"],id:o.id+"_startpoint",color:o["line-color"],lineWidth:o[ZC._[4]],tip:c,tail:d},d={specs:o["end-point"],id:o.id+"_endpoint",color:o["line-color"],lineWidth:o[ZC._[4]],tip:a,tail:l},o["start-point"]&&(!1===o.startSizeZero||o["start-point"]["allow-zero-nodes"])&&s(n,c),o["end-point"]&&(!1===o.endSizeZero||o["end-point"]["allow-zero-nodes"])&&s(n,d))}for(t in n)i.push(function(e,t){var i,n,r=[],a=(e.specs[ZC._[19]]||10)/2,l=e.specs.length||15;e.specs["allow-zero-nodes"];switch(e.specs.type){case"linearrow":n=!1,i=0;break;case"diamond":n=!0,l=(i=l)/2;break;case"triangle":n=!0,i=l;break;default:n=!0,i=.8*l}r.push([l,a]),r.push([0,0]),r.push([l,-a]),n&&(r.push([i,0]),r.push([l,a]));for(var a=Math.atan2(e.tail[1]-e.tip[1],e.tail[0]-e.tip[0]),c=Math.cos(-1*a),d=Math.sin(-1*a),o=0;o<r.length;o++){var h=r[o],s=c*h[0]+d*h[1],g=c*h[1]-d*h[0];h[0]=s+e.tip[0],h[1]=g+e.tip[1]}var a=e.specs[ZC._[61]]||e.color,p=e.specs[ZC._[0]]||e.color,_=e.specs[ZC._[62]]||e.lineWidth,t={id:e.id,cls:"zctreeshape",flat:!0,points:r,visible:t};n?(t.type="poly",t[ZC._[0]]=p,t[ZC._[61]]=a,t[ZC._[62]]=_):(t.type="line",t["line-color"]=a,t[ZC._[4]]=_);return t}(n[t],h));return i}function s(e,t){var i=t.tip[0].toString()+"_"+t.tip[1].toString()+"_"+t.tail[0].toString()+"_"+t.tail[1].toString();e[i]===undefined&&(e[i]=t)}function g(e){var t=e.length;return[e[0],e[1],e[t-1],e[t-2]]}function Te(e,t,i,n,r){var a=g(e.points);e.startSizeZero=!t||!d(a[0],a[1],c(t,i),i.type),e.endSizeZero=!n||!d(a[2],a[3],c(n,r),r.type)}function Ge(e,t,i){var n=g(e.points),t=r(t),i=r(i);e.startSizeZero=!d(n[0],n[1],[t.horzRadius,t.vertRadius],t.type),e.endSizeZero=!d(n[2],n[3],[i.horzRadius,i.vertRadius],i.type)}function r(e){var t,i;if(!e)return{horzRadius:10,vertRadius:10,type:"circle"};var n=e.type||"circle";switch(n){case"circle":case"square":t=ZC._i_(e.size),i=ZC._i_(e.size);break;case"rectangle":t=ZC._i_(e.width)/2,i=ZC._i_(e.height)/2;break;default:i=e[ZC._[21]]?(t=ZC._i_(e.size),ZC._i_(e.size)):(t=(ZC._i_(e[ZC._[19]])||0)/2,(ZC._i_(e[ZC._[20]])||0)/2)}return{horzRadius:t,vertRadius:i,type:n}}function c(e,t){var i,n;switch(t.type){case"circle":case"square":i=t.size,n=t.size;break;case"rectangle":i=e[0]/2,n=e[1]/2;break;default:n=t[ZC._[21]]?(i=t.size,t.size):(i=e[0]/2,e[1]/2)}return[i,n,e[2],e[3]]}function d(e,t,i,n){var r,a,l=i[0],c=i[1];i[2],i[3];function d(e){return!isNaN(e[0])&&!isNaN(e[1])}return e[1]==t[1]&&e[0]<=t[0]?e[0]+=l:e[1]==t[1]&&e[0]>t[0]?e[0]-=l:e[0]==t[0]&&e[1]<=t[1]?e[1]+=c:e[0]==t[0]&&e[1]>t[1]?e[1]-=c:"circle"===n?(i=Math.atan2(t[1]-e[1],t[0]-e[0]),e[0]+=Math.cos(-1*i)*l,e[1]-=Math.sin(-1*i)*l):(n=[e[0]-l,e[1]-c],i=[e[0]+l,e[1]-c],r=[e[0]-l,e[1]+c],c=[e[0]+l,e[1]+c],(d(a=o(n,i,e,t))||d(a=o(i,c,e,t))||d(a=o(c,r,e,t))||d(a=o(r,n,e,t)))&&(e[0]=a[0],e[1]=a[1])),0!=l}function o(e,t,i,n){var r=ZC.AO.A5J(e,t,i,n),a=[NaN,NaN];return isNaN(r[0])||isNaN(r[1])||r[0]>Math.max(e[0],t[0])||r[0]<Math.min(e[0],t[0])||r[1]>Math.max(e[1],t[1])||r[1]<Math.min(e[1],t[1])||n[0]>i[0]&&r[0]<i[0]||n[0]<i[0]&&r[0]>i[0]||n[1]>i[1]&&r[1]<i[1]||n[1]<i[1]&&r[1]>i[1]?a:r}ZC.ZCVector||(ZC.ZCVector=function(e,t){this.fMagnitude=e,this.fDirection=t,this.fMagnitude<0&&(this.fMagnitude=-this.fMagnitude,this.fDirection=(180+this.fDirection)%360),this.fDirection<0&&(this.fDirection=360+this.fDirection)},ZC.ZCVector.add=function(e,t){var i=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),e=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection),t=(i+=t.fMagnitude*Math.cos(Math.PI/180*t.fDirection),e+=t.fMagnitude*Math.sin(Math.PI/180*t.fDirection),Math.sqrt(Math.pow(i,2)+Math.pow(e,2))),e=0===t?0:180/Math.PI*Math.atan2(e,i);return new ZC.ZCVector(t,e)},ZC.ZCVector.sub=function(e,t){var i=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),e=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection),t=(i-=t.fMagnitude*Math.cos(Math.PI/180*t.fDirection),e-=t.fMagnitude*Math.sin(Math.PI/180*t.fDirection),Math.sqrt(Math.pow(i,2)+Math.pow(e,2))),e=0===t?0:180/Math.PI*Math.atan2(e,i);return new ZC.ZCVector(t,e)},ZC.ZCVector.multiply=function(e,t){return new ZC.ZCVector(e.fMagnitude*t,e.fDirection)},ZC.ZCVector.prototype.toXY=function(){return[this.fMagnitude*Math.cos(Math.PI/180*this.fDirection),this.fMagnitude*Math.sin(Math.PI/180*this.fDirection)]},Ye=function(e,t){var i=e.x-t.x,e=e.y-t.y;return Math.sqrt(Math.pow(i,2)+Math.pow(e,2))},Fe=function(e,t){var i=e.x+(t.x-e.x)/2,t=e.y+(t.y-e.y)/2,i=i-e.x,t=t-e.y;return 0==i&&0==t?0:0==i?0<=t?90:270:0==t?0<=i?0:180:Math.atan2(t,i)*(180/Math.PI)},Oe=function(e,t,i,n,r){var a=Math.max(Ye(t,i),1),e=Math.min(.99,e*(r||1))*(a-n),e=Math.max(e,-n),r=(e=Math.min(e,n),Fe(t,i));return new ZC.ZCVector(e,r)},Be=function(e,t,i,n,r,a,l,c){var d=Math.max(Ye(t,i),1),o=t.size||1,h=i.size||1;return l||(o=h=1),(a=c?1:a)*n<d?new ZC.ZCVector(0,0):(l=-e*o*h/(d*d*r),l=Math.max(l,-n),l=Math.min(l,n),c=Fe(t,i),new ZC.ZCVector(l,c))},l=function(e){for(var t=zingchart.plugins.tree[e].data,i=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=0;l<t.length;l++)"link"===t[l].type?(r=Math.min(r,t[l][ZC._[9]]),a=Math.max(a,t[l][ZC._[9]])):(i=Math.min(i,t[l][ZC._[9]]),n=Math.max(n,t[l][ZC._[9]]));zingchart.plugins.tree[e].minValue=i,zingchart.plugins.tree[e].maxValue=n,zingchart.plugins.tree[e].minLinkValue=r,zingchart.plugins.tree[e].maxLinkValue=a},zingchart.plugins.tree=zingchart.plugins.tree||{},zingchart.plugins.tree.graph_defaults={plotarea:{margin:5},container:{padding:5},node:{type:"circle","border-width":1,"border-color":"#fff",tooltip:{text:"%text"},label:{"font-size":10,padding:1,color:"#000",text:"%text"}},link:{flat:!0,"line-color":"#999",alpha:.5,type:"line"}},zingchart.plugins.tree.orgchart_defaults={plotarea:{margin:10},container:{"tree-right":{padding:"20 60 20 60"},"tree-left":{padding:"20 60 20 60"},"tree-down":{padding:"20 60 20 60"},"tree-up":{padding:"20 60 20 60"}},node:{type:"rectangle",width:80,height:30,"border-width":1,"border-color":"#333","background-color":"#fff",label:{color:"#000",width:80,"font-size":10,align:"center",anchor:"c",text:"%text"}},link:{aspect:"split","line-color":"#999","line-width":1}},zingchart.plugins.tree.tree_defaults={plotarea:{margin:10},container:{"tree-radial":{padding:"120 120 120 120"},"tree-right":{padding:"20 120 20 40"},"tree-left":{padding:"20 40 20 120"},"tree-down":{padding:"40 20 120 20"},"tree-up":{padding:"120 20 40 20"}},link:{aspect:"arc","line-color":"#999","line-width":1},"node[collapsed]":{"border-width":1,"border-color":"#666"},node:{type:"circle",tooltip:{text:"%text:%value"},label:{"font-size":10,padding:1,width:100,color:"#000","clip-text":!0,text:"%text"},label_jsRule:function(e,t,i){var n,r,a,l={},c=ZC._i_(t.label.width)/2,d=null!==ZC._n_(t.width)?ZC._i_(t.width)/2:t.size,o=null!==ZC._n_(t.height)?ZC._i_(t.height)/2:t.size,h=Math.max(d,o);switch(i){case"tree-right":0===e.level?l["offset-y"]=-t.size-o:(l.anchor=e.children&&e.children.length?"r":"l",l["offset-x"]=e.children&&e.children.length?-5-d:5+d,l.align=e.children&&e.children.length?"right":"left");break;case"tree-left":0===e.level?l["offset-y"]=-t.size-o:(l.anchor=e.children&&e.children.length?"l":"r",l["offset-x"]=e.children&&e.children.length?5+d:-5-d,l.align=e.children&&e.children.length?"left":"right");break;case"tree-down":l.anchor="c",0===e.level?l["offset-y"]=-t.size-o:(l["offset-y"]=e.children&&e.children.length?-5-c-o:5+c+o,l.angle=91,l.align=e.children&&e.children.length?"right":"left",l["offset-x"]=e.children&&e.children.length?1:0);break;case"tree-up":l.anchor="c",0===e.level?l["offset-y"]=t.size+o:(l["offset-y"]=e.children&&e.children.length?5+c+o:-5-c-o,l.angle=271,l.align=e.children&&e.children.length?"right":"left",l["offset-x"]=e.children&&e.children.length?-1:0);break;case"tree-radial":0===e.level?l["offset-y"]=-t.size-o:(r=e.children&&e.children.length?(90<e.angle&&e.angle<270?(l.angle=e.angle+180,l.align="left"):(l.angle=e.angle,l.align="right"),n=ZC.AO.BN(e.cx,e.cy,e.radius,e.angle),ZC.AO.BN(e.cx,e.cy,e.radius-(5+c+h),e.angle)):(90<e.angle&&e.angle<270?(l.angle=e.angle+180,l.align="right"):(l.angle=e.angle,l.align="left"),n=ZC.AO.BN(e.cx,e.cy,e.radius,e.angle),ZC.AO.BN(e.cx,e.cy,e.radius+(5+c+h),e.angle)),l["offset-x"]=r[0]-n[0],l["offset-y"]=r[1]-n[1])}for(a in l)null!==ZC._n_(t.label[a])&&delete l[a];return l}}},zingchart.bind(null,"dataparse",function(e,t){for(var i,n=0,r=t[ZC._[16]].length;n<r;n++)if(t[ZC._[16]][n].type&&"tree"===t[ZC._[16]][n].type){var a,l,c,d=t[ZC._[16]][n].type,o=(t[ZC._[16]][n]["plugin-type"]=d,t[ZC._[16]][n]),h=(zingchart.normalize(o),o.type="null",{}),s=(o.options&&(h=o.options[d]||o.options),ZC._todash_(h),o[ZC._[11]]=o[ZC._[11]]||[],h["text-attr"]||"text"),g=h["value-attr"]||ZC._[9],p=h["source-attr"]||"source",_=h["target-attr"]||"target",u=h.aspect||"tree-right",d=ZC._b_(ZC._c_(h["org-chart"],0));for(o.plotarea=o.plotarea||{},d?ZC._inj_(o.plotarea,zingchart.plugins.tree.orgchart_defaults.plotarea||{}):"graph"===u?ZC._inj_(o.plotarea,zingchart.plugins.tree.graph_defaults.plotarea||{}):ZC._inj_(o.plotarea,zingchart.plugins.tree.tree_defaults.plotarea||{}),o[ZC._[11]]instanceof Array||(a=[],l={},(c=function(e,t){var i=(e.text||e.name||e[s]).toLowerCase().replace(/[^a-z0-9_]+/gi,""),t=(l[i]?i+=l[i]++:l[i]=1,{id:i,text:e.text||e.name||e[s]||i,value:e[ZC._[9]]||e[ZC._[21]]||e[g],parent:t||""});if(a.push(t),e.children)for(var n=0;n<e.children.length;n++)c(e.children[n],i)})(o[ZC._[11]]),o[ZC._[11]]=a),V=0;V<o[ZC._[11]].length;V++)o[ZC._[11]][V].text=o[ZC._[11]][V].text||o[ZC._[11]][V].name||o[ZC._[11]][V][s]||"Node "+V,o[ZC._[11]][V][ZC._[9]]=o[ZC._[11]][V][ZC._[9]]||o[ZC._[11]][V][ZC._[21]]||o[ZC._[11]][V][g],o[ZC._[11]][V]["node-value"]=o[ZC._[11]][V][ZC._[9]],o[ZC._[11]][V].id||(o[ZC._[11]][V].text?o[ZC._[11]][V].id=o[ZC._[11]][V].text.toLowerCase().replace(/[^a-z0-9_]+/gi,""):o[ZC._[11]][V].id="node"+V),o[ZC._[11]][V].group=o[ZC._[11]][V].group||-1,"graph"!==u?(o[ZC._[11]][V].collapsed=!1,o[ZC._[11]][V].visible=!0):(o[ZC._[11]][V].text=o[ZC._[11]][V].text||o[ZC._[11]][V].name||o[ZC._[11]][V][s]||"Node "+V,(o[ZC._[11]][V].source||o[ZC._[11]][V].from||o[ZC._[11]][V][p])&&(o[ZC._[11]][V].target||o[ZC._[11]][V].to||o[ZC._[11]][V][_])?(o[ZC._[11]][V].source=o[ZC._[11]][V].source||o[ZC._[11]][V].from||o[ZC._[11]][V][p],o[ZC._[11]][V].target=o[ZC._[11]][V].target||o[ZC._[11]][V].to||o[ZC._[11]][V][_],o[ZC._[11]][V].type="link"):o[ZC._[11]][V].type="node"),"graph"===u&&o[ZC._[11]][V].parent&&""!==o[ZC._[11]][V].parent&&o[ZC._[11]].push({type:"link",source:o[ZC._[11]][V].id,target:o[ZC._[11]][V].parent,value:1});for(zingchart.plugins.tree[e.id]=zingchart.plugins.tree[e.id]||{},zingchart.plugins.tree[e.id].size=o[ZC._[11]].length,V=0;V<o[ZC._[11]].length;V++)if(o[ZC._[11]][V].idx=V,null!==ZC._n_(o[ZC._[11]][V].parent))for(z=0;z<o[ZC._[11]].length;z++)o[ZC._[11]][z].id===o[ZC._[11]][V].parent&&(o[ZC._[11]][V].pidx=z,o[ZC._[11]][z].children=o[ZC._[11]][z].children||[],o[ZC._[11]][z].children.push(V));else o[ZC._[11]][V].parent="";for(var Z=!0,C=[];Z;)for(Z=!1,V=0;V<o[ZC._[11]].length;V++)if(null!==ZC._n_(o[ZC._[11]][V].parent)&&(i=o[ZC._[11]][V].parent,-1===ZC.AV(C,i))){for(var f=0,x=!0,v=-1,z=0;z<o[ZC._[11]].length;z++)o[ZC._[11]][z].id===i&&(v=z,o[ZC._[11]][V].pidx=z),null!==ZC._n_(o[ZC._[11]][z].parent)&&o[ZC._[11]][z].parent===i&&(null!==ZC._n_(o[ZC._[11]][z][ZC._[9]])&&ZC._f_(o[ZC._[11]][z][ZC._[9]])+""==o[ZC._[11]][z][ZC._[9]]+""?f+=ZC._f_(o[ZC._[11]][z][ZC._[9]]):x=!1);x&&-1!==v&&(null!==ZC._n_(o[ZC._[11]][v][ZC._[9]])&&(o[ZC._[11]][v]["node-value"]=o[ZC._[11]][v][ZC._[9]]),o[ZC._[11]][v][ZC._[9]]=f,C.push(i),Z=!0)}for(V=0;V<o[ZC._[11]].length;V++)o[ZC._[11]][V][ZC._[9]]=o[ZC._[11]][V][ZC._[9]]||1,"graph"===u&&(o[ZC._[11]][V].container=o[ZC._[11]][V].container||0);for(var m=!0,b=Number.MAX_VALUE,y=-Number.MAX_VALUE,M=0;m;)for(m=!1,V=0;V<o[ZC._[11]].length;V++)"graph"===u&&"node"!==o[ZC._[11]][V].type||(b=Math.min(b,o[ZC._[11]][V][ZC._[9]]),y=Math.max(y,o[ZC._[11]][V][ZC._[9]])),null===ZC._n_(o[ZC._[11]][V].level)?o[ZC._[11]][V].sibling||null!==ZC._n_(o[ZC._[11]][V].parent)&&""!==o[ZC._[11]][V].parent?(v=o[ZC._[11]][V].pidx,null!==ZC._n_(v)?null===ZC._n_(o[ZC._[11]][v].level)?m=!0:(o[ZC._[11]][V].level=ZC._i_(o[ZC._[11]][v].level)+1,"graph"!==u&&(o[ZC._[11]][V].container=o[ZC._[11]][v].container)):o[ZC._[11]][V].container=o[ZC._[11]][V].level=0):(o[ZC._[11]][V].level=0,"graph"!==u&&(o[ZC._[11]][V].container=M),M++):(v=o[ZC._[11]][V].pidx,null!==ZC._n_(v)?o[ZC._[11]][V].container=o[ZC._[11]][v].container||0:o[ZC._[11]][V].container=0);if(zingchart.plugins.tree[e.id].minValue=b,zingchart.plugins.tree[e.id].maxValue=y,"graph"===u){for(var w=Number.MAX_VALUE,k=-Number.MAX_VALUE,V=0;V<o[ZC._[11]].length;V++)"link"===o[ZC._[11]][V].type&&(w=Math.min(w,o[ZC._[11]][V][ZC._[9]]),k=Math.max(k,o[ZC._[11]][V][ZC._[9]]));zingchart.plugins.tree[e.id].minLinkValue=w,zingchart.plugins.tree[e.id].maxLinkValue=k}o.plotarea=o.plotarea||{},ZC._inj_(o.plotarea,{margin:"10 10 10 10","mask-tolerance":[0,0]})}return t}),t=function(G){var d,J,Q,Ze,W,H,K,$,o,ee,Ce,fe,xe,ve,Y,F,L,X,E,O,B,q,T,ze,te,ie,n,me,be,ye,l,c,Me,we,ne,re,ae,ke,Ve,Ae,Ne,Le,le,ce,de,oe,Xe,he,I,j,R,D,P,Ee,Ie,A,N,je,Re,De,Pe,se,ge,pe,_e,Se,S,Ue,U,e,a,r,ue=zingchart.getLoader(G.loader.id),t=zingchart.getGraph(ue,G.graphid),i=t.o;"tree"===i["plugin-type"]&&(d=zingchart.getGraphInfo(ue,i,t.K).plotarea,W={},i.options&&(W=i.options.tree||i.options),ZC._todash_(W),H=W.palette||["#a7da47","#00b0e1","#ef4810","#f9c332","#84680a","#4d62b1","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],K=W.aspect||"tree-right",$=ZC._b_(ZC._c_(W["org-chart"],0)),o=W.layout||"x",ee=ZC._i_(ZC._c_(W.progression,"0")),Ce=ZC._i_(ZC._c_(W.aperture,"360")),fe=ZC._i_(ZC._c_(W["ref-angle"],"0")),xe=ZC._i_(ZC._c_(W["min-size"],4)),ve=ZC._i_(ZC._c_(W["max-size"],4)),Y=ZC._i_(ZC._c_(W["min-link-width"],1)),F=ZC._i_(ZC._c_(W["max-link-width"],5)),L=ZC._f_(ZC._c_(W["attraction-constant"],.99)),X=ZC._i_(ZC._c_(W["repulsion-constant"],1e3)),E=ZC._i_(ZC._c_(W["repulsion-distance-factor"],20)),O=ZC._f_(ZC._c_(W["spring-length"],40)),B=ZC._i_(ZC._c_(W["max-iterations"],1e3)),q=ZC._f_(ZC._c_(W["damping-step"],.005)),T=ZC._b_(ZC._c_(W["weighted-nodes"],0)),ze=ZC._b_(ZC._c_(W["weighted-links"],0)),te=Math.max(1,ZC._i_(ZC._c_(W["packing-factor"],1))),ie=Math.max(.1,ZC._f_(ZC._c_(W["depth-ratio"],2))),n=ZC._b_(ZC._c_(W["weighted-links"],0)),$&&(n=!0),zingchart.plugins.tree[G.id].data=[].concat(i[ZC._[11]]||[]),zingchart.plugins.tree[G.id].attractionConstant=L,zingchart.plugins.tree[G.id].repulsionConstant=X,zingchart.plugins.tree[G.id].springLength=O,me=function(e,t){var i=zingchart.plugins.tree[G.id].data;if(i[e].children)for(var n=0;n<i[e].children.length;n++)i[i[e].children[n]].coord+=t,me(i[e].children[n],t)},be=function(e){var t,i=zingchart.plugins.tree[G.id].data,n=!1,r=-1,a=-1;return null===ZC._n_(i[e].pidx)||0===(t=ZC.AV(i[i[e].pidx].children,e))?n=!0:(n=!1,a=i[i[e].pidx].children[r=t-1]),{first:n,prevSiblingIndex:r,prevIndex:a}},ye=function(e,t){var i=zingchart.plugins.tree[G.id].data,n=[];if(n.push(e),i[e].children&&i[e].children.length&&(t||!i[e].collapsed))for(var r=0;r<i[e].children.length;r++)n=n.concat(ye(i[e].children[r]));return n},l=function(e,t,i){var n=zingchart.plugins.tree[G.id].data,r=[];if(t){for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[0];for(;null!==ZC._n_(n[e].pidx);)(-1===i||n[e].level<=i)&&r.push(e),e=n[e].pidx}if(r.push(e),!t)for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[0],(-1===i||n[e].level<=i)&&r.push(e);return r},c=function(e,t,i){var n=zingchart.plugins.tree[G.id].data,r=[];if(t){for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[n[e].children.length-1];for(;null!==ZC._n_(n[e].pidx);)(-1===i||n[e].level<=i)&&r.push(e),e=n[e].pidx}if(r.push(e),!t)for(;n[e].children&&n[e].children.length&&!n[e].collapsed&&!n[e].fake;)e=n[e].children[n[e].children.length-1],(-1===i||n[e].level<=i)&&r.push(e);return r},Me=function(e){for(var t=zingchart.plugins.tree[G.id].data,i=Number.MAX_VALUE,n=0;n<e.length;n++)i=Math.min(i,t[e[n]].coord);return i},we=function(e){for(var t=zingchart.plugins.tree[G.id].data,i=-Number.MAX_VALUE,n=0;n<e.length;n++)i=Math.max(i,t[e[n]].coord);return i},ne=null,re=function(){var e=zingchart.plugins.tree[G.id].data;if(!ne)for(ne={},n=0;n<e.length;n++)ne[e[n].id]=e[n].idx;for(var t,i={},n=0;n<e.length;n++)e[n].reference&&(t=e[ne[e[n].reference]],i[e[n].reference]=i[e[n].reference]||1,e[n].coord=t.coord,e[n].level=t.level+i[e[n].reference],i[e[n].reference]+=1),e[n].sibling&&0===e[n].level&&(t=e[ne[e[n].sibling]],e[n].idx<t.idx?e[n].coord=t.coord-te:e[n].coord=t.coord+te);ke()},ke=function(){for(var e=zingchart.plugins.tree[G.id].data,t=0;t<e.length;t++)e[t].visible&&(ae=Math.max(ae,i[ZC._[11]][t].level))},Ve=function(e,t){var i=zingchart.plugins.tree[G.id].data;if(i[e].visible&&(i[e].reference?i[e].coord=0:i[e].coord=t*te,i[e].children))for(var n=0;n<i[e].children.length;n++)Ve(i[e].children[n],n*te)},Ae=function(e){var t=zingchart.plugins.tree[G.id].data;if(t[e].visible&&!t[e].reference){var i,n=be(e),r=n.first,n=n.prevIndex;if(r||(r=c(n,!1,-1),n=l(e,!1,-1),r=we(r),i=0,(n=Me(n))<=r&&(t[e].coord+=i=r-n+te,me(e,i))),t[e].children&&t[e].children.length&&!t[e].collapsed)for(var a=0;a<t[e].children.length;a++)Ae(t[e].children[a])}},Ne=function(e){var t=zingchart.plugins.tree[G.id].data;if(t[e].visible&&t[e].children&&!t[e].collapsed){for(var i=t[e].children.length,n=t[e].children[0],i=t[e].children[i-1],n=(t[n].coord+t[i].coord)/2,r=t[e].coord-n,a=0;a<t.length;a++)t[a].sibling===t[e].id&&(t[a].coord-=r);t[e].coord=n}},Le=function(e,t){var i=0,n="r";return e.children&&e.children.length?t.children&&t.children.length||(n="l",t.coord-e.coord>te&&(t.coord=e.coord+te,i++)):t.children&&t.children.length?(n="r",t.coord-e.coord>te&&(e.coord=t.coord-te,i++)):t.coord-e.coord>te&&("r"===n?e.coord=t.coord-te:t.coord=e.coord+te,i++),i},le=[],ce=[],de=[],oe=[],I=[],j=[],R={},D={},P={},Ee=1,A="",Re={},Pe=De=!(je=!(N=[Ie=ae=0,0])),e=zingchart.getInstance(t,"textbox"),$?e.append(zingchart.plugins.tree.orgchart_defaults.container[K]):"graph"===K?e.append(zingchart.plugins.tree.graph_defaults.container):e.append(zingchart.plugins.tree.tree_defaults.container[K]),e.append(W.container),e.parse(),se=e.FM,ge=e.FN,pe=e.FU,_e=e.EQ,Se=function(e){if(le=[],1<e)for(var t,i=-1,n=-1,r=("h"===o?(i=1,n=e):"v"===o?(i=e,n=1):-1!==o.indexOf("x")&&(""!==(t=o.split("x"))[0]&&(i=ZC._i_(t[0])),""!==t[1]&&(n=ZC._i_(t[1])),-1===i&&-1===n?i=n=Math.ceil(Math.sqrt(e)):-1===i&&-1!==n?i=Math.ceil(e/n):-1!==i&&-1===n&&(n=Math.ceil(e/i))),d.width/n),a=d.height/i,l=0;l<i;l++)for(var c=0;c<n;c++)le[l*n+c]={x:d.x+c*r,y:d.y+l*a,width:r,height:a};else le[0]={x:d.x,y:d.y,width:d.width,height:d.height}},zingchart.plugins.tree[G.id].bFirstRender=!0,S={},Ue=function(e){if(ue.ST=[],L=zingchart.plugins.tree[G.id].attractionConstant,X=zingchart.plugins.tree[G.id].repulsionConstant,O=zingchart.plugins.tree[G.id].springLength,!e||(Ee=1,Ie=0,!je)){je=!0;var t,i=zingchart.plugins.tree[G.id].data,n=I.length,r=j.length,a=0,l=0,c=[],d=(""!==A&&(i[R[A]].x=N[0],i[R[A]].y=N[1]),[]);for(J=0;J<n;J++)if((k=i[I[J]])&&(t=le[k.container],d[k.container]||(d[k.container]={minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE}),k.id!==A)){for(var o,h,s={x:t.x+t.width/2,y:t.y+t.height/2},g={x:t.x+t.width/2,y:t.y+t.height/2},p=O,_=1,u="",s=(null!==ZC._n_(k.level)&&0<k.level&&20<p&&(p=Math.round(Math.max(20,p-5*k.level))),new ZC.ZCVector(Ye(s,k),Fe(s,k))),Z=new ZC.ZCVector(0,0),C=new ZC.ZCVector(0,0),f=0;f<n;f++)J!==f&&k.container===i[I[f]].container&&(_=1,o=p,u=k.id+"-"+i[I[f]].id,U[u]&&(o=U[u]),ze&&i[P[u]]&&zingchart.plugins.tree[G.id].maxLinkValue!==zingchart.plugins.tree[G.id].minLinkValue&&(_+=Math.round((F-Y)*(i[P[u]].value-zingchart.plugins.tree[G.id].minLinkValue)/(zingchart.plugins.tree[G.id].maxLinkValue-zingchart.plugins.tree[G.id].minLinkValue))),h=Be(X,k,i[I[f]],o,_,E,T,i[P[u]]?1:0),C=ZC.ZCVector.add(C,h));k.level&&(m=Be(X,k,g,p,_,10*E,T,0),C=ZC.ZCVector.add(C,m));var Z=ZC.ZCVector.add(Z,C),x=!1,v=new ZC.ZCVector(0,0);if(D[k.id])for(f=0;f<D[k.id].length;f++){_=1,o=p,u=k.id+"-"+i[R[D[k.id][f]]].id,U[u]&&(o=U[u]),ze&&(_=Y,zingchart.plugins.tree[G.id].maxLinkValue!==zingchart.plugins.tree[G.id].minLinkValue&&(_+=Math.round((F-Y)*(i[P[u]].value-zingchart.plugins.tree[G.id].minLinkValue)/(zingchart.plugins.tree[G.id].maxLinkValue-zingchart.plugins.tree[G.id].minLinkValue))));var z=Oe(L,k,i[R[D[k.id][f]]],o,_);z.fMagnitude/=2,v=ZC.ZCVector.add(v,z),i[R[D[k.id][f]]].id===A&&(x=!0)}else var m=Oe(L,k,g,p,1),v=ZC.ZCVector.add(v,m);D[k.id]?(v.fMagnitude>p/10||1<D[k.id].length)&&(v=ZC.ZCVector.multiply(v,Math.min(1,(x?2.5:1)/D[k.id].length))):v.fMagnitude=Math.min(5*(x?2.5:1),v.fMagnitude),k.cg&&(g=Oe(999*L,k,k.cg,5,1),v=ZC.ZCVector.add(v,g)),Z=ZC.ZCVector.add(Z,v),Z=ZC.ZCVector.multiply(Z,Ee);g=(s=ZC.ZCVector.add(s,Z)).toXY(),Z=Ye(k,{x:t.x+t.width/2+g[0],y:t.y+t.height/2+g[1]});a+=Z,l=Math.max(l,Z),k.__x=t.x+t.width/2+g[0],k.__y=t.y+t.height/2+g[1]}for(J=0;J<n;J++)(k=i[I[J]]).id!==A&&(k.x=k.__x,k.y=k.__y),d[k.container].minX=Math.min(d[k.container].minX,k.x),d[k.container].maxX=Math.max(d[k.container].maxX,k.x),d[k.container].minY=Math.min(d[k.container].minY,k.y),d[k.container].maxY=Math.max(d[k.container].maxY,k.y);var b=0,y=[];for(J=0;J<d.length;J++)y[J]=1,d[J].maxX-d[J].minX>le[J].width&&(y[J]=Math.min(y[J],le[J].width/(d[J].maxX-d[J].minX))),d[J].maxY-d[J].minY>le[J].height&&(y[J]=Math.min(y[J],le[J].height/(d[J].maxY-d[J].minY))),d[J].diffX=le[J].x+le[J].width/2-(d[J].maxX+d[J].minX)/2,d[J].diffY=le[J].y+le[J].height/2-(d[J].maxY+d[J].minY)/2,b+=Ye({x:le[J].x+le[J].width/2,y:le[J].y+le[J].height/2},{x:(d[J].maxX+d[J].minX)/2,y:(d[J].maxY+d[J].minY)/2});var M,w,k,V={};for(J=0;J<n;J++)(k=i[I[J]]).cg||""!==A&&i[R[A]].container===k.container||(k.x+=d[k.container].diffX/O,k.y+=d[k.container].diffY/O),S[k.id]&&(k.x=S[k.id][0]||k.x,k.y=S[k.id][1]||k.y),1!==y[k.container]?(k._x_=le[k.container].x+le[k.container].width/2+(k.x-le[k.container].x-le[k.container].width/2)*y[k.container],k._y_=le[k.container].y+le[k.container].height/2+(k.y-le[k.container].y-le[k.container].height/2)*y[k.container]):(k._x_=k.x,k._y_=k.y),Re[k.id]=[k._x_,k._y_],V={id:"node_"+k.id,x:k._x_,y:k._y_},15<=Ie&&(V.visible=De),c.push(V);for(J=0;J<r;J++)(k=i[j[J]])&&(M=i[R[k.source]],w=i[R[k.target]],V={id:"link_"+M.id+"_"+w.id,points:[[M._x_,M._y_],[w._x_,w._y_]]},ZC._cp_(W.link,V),15<=Ie&&(V.visible=Pe),Ge(V,M.cls?W["node[cls-"+M.cls+"]"]:W.node,w.cls?W["node[cls-"+w.cls+"]"]:W.node),c.push(V));zingchart.exec(G.id,"updateobject",{type:"shape",data:c.concat(qe(c))}),++Ie<15||Ie<B&&(1<a&&.1<l||2<b)?(Ee=Math.max(.001,Ee-q),window.setTimeout(Ue,1)):je=!1}},U={},e=zingchart.plugins.tree[G.id]._render_graph_=function(){zingchart.exec(G.id,"removeobject",{type:"shape",cls:"zctreeshape"}),de=[],oe=[],I=[],j=[],R={},D={},P={};var e=zingchart.plugins.tree[G.id].data,t=!1,i=[],n=0;for(J=0;J<e.length;J++)((h=e[J]).parent||h.children)&&(t=!0),"node"===h.type?(I.push(J),R[h.id]=J,i[h.container]||(i[h.container]=[],n++),i[h.container].push(J)):(j.push(J),D[h.source]=D[h.source]||[],D[h.source].push(h.target),D[h.target]=D[h.target]||[],D[h.target].push(h.source),P[h.source+"-"+h.target]=J,P[h.target+"-"+h.source]=J);Se(n);for(var r={},a=0;a<le.length;a++){var l=le[a];if(i[a]=i[a]||[],i[a].length){var c=[l.x+l.width/2,l.y+l.height/2];if(t)for(var d,o,h,s={},g=0;g<i[a].length;g++)(h=e[i[a][g]]).parent?(d=e[R[h.parent]])&&(o=r[d.id],o=ZC.AO.BN(o[0],o[1],Math.max(25,60-5*d.level),s[h.parent]),r[h.id]=[o[0],o[1]],o=15,h.level<=1&&(o=360/Math.max(1,(d.children||[]).length)),s[h.id]||(s[h.id]=s[d.id],h.children&&1<d.children.length&&(s[h.id]-=15*(h.children.length-1)/2)),s[d.id]+=o):(r[h.id]=[c[0],c[1]],s[h.id]=1);else for(var p=Math.ceil(Math.sqrt(i[a].length)),_=Math.min(10,Math.round(l.width/p)),u=_*p,Z=Math.min(10,Math.round(l.height/p)),C=Z*p,f=0;f<p;f++)for(var x=0;x<p;x++){var v=f*p+x;v<i[a].length&&(r[e[i[a][v]].id]=[c[0]-u/2+x*_,c[1]-C/2+f*Z])}}}for(J=0;J<I.length;J++){h=e[I[J]],Re[h.id]?(h.x=Re[h.id][0],h.y=Re[h.id][1]):(h.x=r[h.id][0],h.y=r[h.id][1]);var z,m=xe,b=(zingchart.plugins.tree[G.id].maxValue!==zingchart.plugins.tree[G.id].minValue&&(m+=Math.round((ve-xe)*(h.value-zingchart.plugins.tree[G.id].minValue)/(zingchart.plugins.tree[G.id].maxValue-zingchart.plugins.tree[G.id].minValue))),h.size=1+.5*m/ve,ZC._i_(-1!==h.group?h.group:h.level||"0")),y={};if(ZC._cp_(zingchart.plugins.tree.graph_defaults.node,y),ZC._cp_({id:"node_"+h.id,cls:"zctreeshape","background-color":H[b%H.length],size:m},y),ZC._cp_(W.node||{},y),ZC._cp_(W["node[group-"+h.group+"]"],y),ZC._cp_(W["node[container-"+h.container+"]"],y),h.cls)for(var M=h.cls.split(/\s/),w=0;w<M.length;w++)ZC._cp_(W["node[cls-"+M[w]+"]"],y);if(W.nodes&&W.nodes[h.id]&&ZC._cp_(W.nodes[h.id],y),y["js-rule"])try{var k=ZC.execFn(y["js-rule"].replace("javascript:","").replace("()",""),window,G.id,h,y);k&&ZC._cp_(k,y)}catch(E){}h.style&&ZC._cp_(h.style,y);b={decimals:null,"short":!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(y,b),y.label&&y.label.text){for(z in y.label.text=y.label.text.replace(/%text/gi,h.text).replace(/%node-value/gi,zingchart.formatNumber(h["node-value"],b)).replace(/%value/gi,zingchart.formatNumber(h.value,b)),h)"data-"===z.substring(0,5)&&(y.label.text=y.label.text.replace(new RegExp("%"+z,"g"),h[z]));y.label.text=y.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(y.tooltip&&y.tooltip.text){for(z in ZC._cp_(y.tooltip,b),y.tooltip.text=y.tooltip.text.replace(/%text/gi,h.text).replace(/%node-value/gi,zingchart.formatNumber(h["node-value"],b)).replace(/%value/gi,zingchart.formatNumber(h.value,b)),h)"data-"===z.substring(0,5)&&(y.tooltip.text=y.tooltip.text.replace(new RegExp("%"+z,"g"),h[z]));y.tooltip.text=y.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}zingchart.plugins.tree[G.id].bFirstRender&&(null===ZC._n_(y.visible)||y.visible||(De=!1),y.visible=!1),null!==ZC._n_(y.x)||null!==ZC._n_(y.y)?(S[h.id]=[0,0],null!==ZC._n_(y.x)?(y.x=ZC._i_(y.x),S[h.id][0]=y.x):y.x=h.x,null!==ZC._n_(y.y)?(y.y=ZC._i_(y.y),S[h.id][1]=y.y):y.y=h.y):(y.x=h.x,y.y=h.y),de.push(y)}for(J=0;J<j.length;J++){h=e[j[J]];var V=e[R[h.source]],A=e[R[h.target]],N=Y,L=(zingchart.plugins.tree[G.id].maxLinkValue!==zingchart.plugins.tree[G.id].minLinkValue&&(N+=Math.round((F-Y)*(h.value-zingchart.plugins.tree[G.id].minLinkValue)/(zingchart.plugins.tree[G.id].maxLinkValue-zingchart.plugins.tree[G.id].minLinkValue))),{});if(ZC._cp_(zingchart.plugins.tree.graph_defaults.link,L),ZC._cp_({id:"link_"+V.id+"_"+A.id,cls:"zctreeshape","fast-vector-path":!0,"line-width":N,points:[[V.x,V.y],[A.x,A.y]]},L),ZC._cp_(W.link||{},L),ZC._cp_(W["link[group-"+V.group+"]"],L),ZC._cp_(W["link[container-"+V.container+"]"],L),ZC._cp_(W["link[source-"+V.id+"]"],L),ZC._cp_(W["link[target-"+A.id+"]"],L),h.cls&&ZC._cp_(W["link[cls-"+h.cls+"]"],L),L["js-rule"])try{var X=ZC.execFn(L["js-rule"].replace("javascript:","").replace("()",""),window,G.id,h,V,A,L);X&&ZC._cp_(X,L)}catch(E){}W.links&&W.links[V.id+"-"+A.id]&&ZC._cp_(W.links[V.id+"_"+A.id],L),zingchart.plugins.tree[G.id].bFirstRender&&(null===ZC._n_(L.visible)||L.visible||(Pe=!1),L.visible=!1),L.length&&(U[V.id+"-"+A.id]=U[A.id+"-"+V.id]=L.length),Ge(L,V.cls?W["node[cls-"+V.cls+"]"]:W.node,A.cls?W["node[cls-"+A.cls+"]"]:W.node),oe.push(L)}zingchart.exec(G.id,"addobject",{type:"shape",data:oe.concat(qe(oe)).concat(de)}),zingchart.plugins.tree[G.id].bFirstRender=!1,window.setTimeout(function(){Ue(!0)},1)},a=function(){ue.ST=[],le=[],ce=[],de=[],oe=[];var e=zingchart.plugins.tree[G.id].data,R=[],t=[];for(J=0;J<e.length;J++)0!==e[J].level||e[J].sibling||(R.push(e[J]),t.push(J));ke();var i,n={};for(J=0;J<e.length;J++)n[e[J].container+"-"+e[J].level]=n[e[J].container+"-"+e[J].level]||[],n[e[J].container+"-"+e[J].level].push(e[J].idx);Se(R.length);for(var r,a,D,l,c,d,o,h,s,g,p,_=0;_<le.length;_++)if(R[_]){for(J=0;J<t.length;J++)J===_&&Ve(t[J],J);for(re(),Q=ae;0<=Q;Q--)if(n[_+"-"+Q])for(J=0;J<n[_+"-"+Q].length;J++)d=n[_+"-"+Q][J],g=s=h=o=void 0,(g=zingchart.plugins.tree[G.id].data)[d].visible&&!g[d].reference&&g[d].children&&!g[d].collapsed&&(s=g[d].children.length,o=g[d].children[0],s=g[d].children[s-1],o=(g[o].coord+g[s].coord)/2,h=(s=be(d)).first,s=s.prevSiblingIndex,h?g[d].coord=o:(h=g[g[d].pidx].children[s],g[d].coord=g[h].coord+te,0!=(s=g[d].coord-o)&&me(d,s)));for(re(),J=0;J<t.length;J++)Ae(t[J]);for(re(),Q=ae-1;0<=Q;Q--)if(n[_+"-"+Q])for(J=0;J<n[_+"-"+Q].length;J++)Ne(n[_+"-"+Q][J]);if(re(),$){for(Q=ae-1;0<=Q;Q--)if(n[_+"-"+Q])for(var P=1,S=0;0<P&&S<128;){for(J=P=0;J<n[_+"-"+Q].length;J++)P+=function(e){var t=zingchart.plugins.tree[G.id].data,i=0;if(t[e].visible&&t[e].children&&1<t[e].children.length&&!t[e].collapsed)for(var n=1;n<t[e].children.length;n++){var r=t[t[e].children[n]],a=t[t[e].children[n-1]];i+=Le(a,r)}return i}(n[_+"-"+Q][J]);S++}re()}for(J=0;J<e.length;J++)if(e[J].container===_&&e[J].children)for(Ze=1;Ze<e[J].children.length;Ze++)r=e[J].children[Ze],l=c=l=D=a=void 0,D=zingchart.plugins.tree[G.id].data,l=be(r),c=l.first,l=l.prevIndex,c||(c=ye(l),l=ye(r),c=we(c),l=Me(l),a=0,c+te<l&&(D[r].coord+=-(a=l-c-te),me(r,-a)));for(re(),Q=ae-1;0<=Q;Q--)if(n[_+"-"+Q])for(J=0;J<n[_+"-"+Q].length;J++)Ne(n[_+"-"+Q][J]);re();var u=Number.MAX_VALUE,Z=-Number.MAX_VALUE;for(J=0;J<e.length;J++)e[J].container===_&&(""!==e[J].parent?e[J].visible&&e[e[J].pidx].visible&&ce.push([e[J].pidx,e[J].idx]):e[J].sibling&&null===ZC._n_(e[J].pidx)&&null!==ZC._n_(ne[e[J].sibling])&&ce.push([ne[e[J].sibling],e[J].idx]),e[J].visible&&(u=Math.min(u,e[J].coord),Z=Math.max(Z,e[J].coord)));u===Z&&(Z=u+te);var C,f=le[_],U=function(e){for(var t=0,i=e;0<=i;i--)t+=Math.pow(2,i);return t};switch(K){case"tree-radial":i=Math.min(f.width-ge-_e,f.height-se-pe)/(2*Math.max(ae,1)),0!==ee&&(i=Math.pow(2,ae-1)*Math.min(f.width-ge-_e,f.height-se-pe)/U(ae-1));break;case"tree-down":case"tree-up":i=(f.height-se-pe)/Math.max(ae,1),0!==ee&&(i=Math.pow(2,ae-1)*(f.height-se-pe)/U(ae-1));break;case"tree-left":case"tree-right":i=(f.width-ge-_e)/Math.max(ae,1),0!==ee&&(i=Math.pow(2,ae-1)*(f.width-_e-ge)/U(ae-1))}for(J=0;J<e.length;J++)if(e[J].visible&&e[J].container===_)switch(K){case"tree-right":if(C=(f.height-se-pe)/(Z-u),e[J].y=f.y+se+(e[J].coord-u)*C,0===ae&&(e[J].y+=f.height/2),e[J].x=f.x+_e,0===ee)e[J].x+=e[J].level*i;else if(-1===ee)for(Q=0;Q<e[J].level;Q++)e[J].x+=i*Math.pow(2,-Q);else if(1===ee)for(Q=0;Q<e[J].level;Q++)e[J].x+=i*Math.pow(2,-ae+Q+1);break;case"tree-left":if(C=(f.height-se-pe)/(Z-u),e[J].y=f.y+se+(e[J].coord-u)*C,0===ae&&(e[J].y+=f.height/2),e[J].x=f.x+f.width-ge,0===ee)e[J].x-=e[J].level*i;else if(-1===ee)for(Q=0;Q<e[J].level;Q++)e[J].x-=i*Math.pow(2,-Q);else if(1===ee)for(Q=0;Q<e[J].level;Q++)e[J].x-=i*Math.pow(2,-ae+Q+1);break;case"tree-down":if(C=(f.width-ge-_e)/(Z-u),e[J].x=f.x+_e+(e[J].coord-u)*C,0===ae&&(e[J].x+=f.width/2),e[J].y=f.y+se,0===ee)e[J].y+=e[J].level*i;else if(-1===ee)for(Q=0;Q<e[J].level;Q++)e[J].y+=i*Math.pow(2,-Q);else if(1===ee)for(Q=0;Q<e[J].level;Q++)e[J].y+=i*Math.pow(2,-ae+Q+1);break;case"tree-up":if(C=(f.width-ge-_e)/(Z-u),e[J].x=f.x+_e+(e[J].coord-u)*C,0===ae&&(e[J].x+=f.width/2),e[J].y=f.y+f.height-pe,0===ee)e[J].y-=e[J].level*i;else if(-1===ee)for(Q=0;Q<e[J].level;Q++)e[J].y-=i*Math.pow(2,-Q);else if(1===ee)for(Q=0;Q<e[J].level;Q++)e[J].y-=i*Math.pow(2,-ae+Q+1);break;case"tree-radial":if(e[J].angle=fe+(e[J].coord-u)*(C=Ce/(Z-u+1)),(e[J].radius=0)===ee)e[J].radius+=e[J].level*i;else if(-1===ee)for(Q=0;Q<e[J].level;Q++)e[J].radius+=i*Math.pow(2,-Q-1);else if(1===ee)for(Q=0;Q<e[J].level;Q++)e[J].radius+=i*Math.pow(2,-ae+Q);e[J].cx=f.x+_e+(f.width-_e-ge)/2,e[J].cy=f.y+se+(f.height-se-pe)/2,Xe=ZC.AO.BN(e[J].cx,e[J].cy,e[J].radius,e[J].angle),e[J].x=Xe[0],e[J].y=Xe[1]}}var x={},v={},z=$?zingchart.plugins.tree.orgchart_defaults:zingchart.plugins.tree.tree_defaults;for(J=0;J<e.length;J++)if(e[J].visible&&!e[J].fake){var m,b=e[J],y=Math.round(xe+(ve-xe)*(b.value-zingchart.plugins.tree[G.id].minValue)/(zingchart.plugins.tree[G.id].maxValue-zingchart.plugins.tree[G.id].minValue)),M={};if(ZC._cp_(z.node,M),ZC._cp_({id:"node_"+b.id,cls:"zctreeshape","background-color":H[b.level%H.length],"hover-state":{"background-color":ZC.AQ.JN(H[b.level%H.length],20)},x:b.x,y:b.y,size:y,dataTreeIndex:b.idx},M),b.children&&b.children.length?ZC._cp_(z["node[parent]"],M):ZC._cp_(z["node[leaf]"],M),b.collapsed&&ZC._cp_(z["node[collapsed]"],M),ZC._cp_(W.node||{},M),b.children&&b.children.length?ZC._cp_(W["node[parent]"],M):ZC._cp_(W["node[leaf]"],M),b.collapsed&&ZC._cp_(W["node[collapsed]"],M),ZC._cp_(W["node[container-"+b.container+"]"],M),ZC._cp_(W["node[level-"+b.level+"]"],M),b.parent&&ZC._cp_(W["node[parent-"+e[b.pidx].id+"]"],M),b.cls)for(var Y=b.cls.split(/\s/),F=0;F<Y.length;F++)ZC._cp_(W["node[cls-"+Y[F]+"]"],M);if(W.nodes&&W.nodes[b.id]&&ZC._cp_(W.nodes[b.id],M),W.nodes&&W.nodes[ZC.UN(b.id)]&&ZC._cp_(W.nodes[ZC.UN(b.id)],M),M.label&&(M.label.x=b.x,M.label.y=b.y,z.node.label_jsRule&&ZC._cp_(z.node.label_jsRule(b,M,K),M.label)),M["js-rule"])try{var O=ZC.execFn(M["js-rule"].replace("javascript:","").replace("()",""),window,G.id,b,M);O&&ZC._cp_(O,M)}catch(j){}b.style&&ZC._cp_(b.style,M);y={decimals:null,"short":!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(M,y),M.label&&M.label.text){for(m in M.label.text=M.label.text.replace(/%text/gi,b.text).replace(/%node-value/gi,zingchart.formatNumber(b["node-value"],y)).replace(/%value/gi,zingchart.formatNumber(b.value,y)),b)"data-"===m.substring(0,5)&&(M.label.text=M.label.text.replace(new RegExp("%"+m,"g"),b[m]));M.label.text=M.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(M.tooltip&&M.tooltip.text){for(m in ZC._cp_(M.tooltip,y),M.tooltip.text=M.tooltip.text.replace(/%text/gi,b.text).replace(/%node-value/gi,zingchart.formatNumber(b["node-value"],y)).replace(/%value/gi,zingchart.formatNumber(b.value,y)),b)"data-"===m.substring(0,5)&&(M.tooltip.text=M.tooltip.text.replace(new RegExp("%"+m,"g"),b[m]));M.tooltip.text=M.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}de.push(M),x[b.id]=[],x[b.id][0]=ZC._i_(M.width||M.size||"0"),x[b.id][1]=ZC._i_(M.height||M.size2||M.size||"0"),x[b.id][2]=ZC._i_(M["offset-x"]||"0"),x[b.id][3]=ZC._i_(M["offset-y"]||"0"),v[b.id]={size:ZC._i_(M[ZC._[21]]),type:M.type}}for(J=0;J<ce.length;J++){p=e[ce[J][0]],b=e[ce[J][1]];var w={};if(ZC._cp_(z.link,w),ZC._cp_({id:"link_"+b.idx+"_"+p.idx,cls:"zctreeshape",type:"line",flat:!0},w),ZC._cp_(W.link||{},w),ZC._cp_(W["link[level-"+p.level+"]"],w),ZC._cp_(W["link[container-"+p.container+"]"],w),ZC._cp_(W["link[parent-"+p.id+"]"],w),!(b.sibling&&(p=e[ne[b.sibling]],w.aspect="sibling",ZC._cp_(W["link[sibling]"],w),p.fake&&b.fake||b.fake&&!b.children))){if(w["js-rule"])try{var B=ZC.execFn(w["js-rule"].replace("javascript:","").replace("()",""),window,G.id,b,p,w);B&&ZC._cp_(B,w)}catch(j){}W.links&&W.links[p.id+"_"+b.id]&&ZC._cp_(W.links[p.id+"_"+b.id],w);var k,q,T,V=[],A=b.x,N=b.y,L=(x[b.id]&&(A+=x[b.id][2],N+=x[b.id][3]),p.x),X=p.y,E=(x[p.id]&&(L+=x[p.id][2],X+=x[p.id][3]),!0),I=i;switch(w.aspect){case"sibling":V=[[A,N],[L,X]],E=!0;break;case"side-before":case"side-after":V="tree-down"===K||"tree-up"===K?($||(I=ZC._a_(X-N)),[[A,N],[L+("side-after"===w.aspect?1:-1)*x[p.id][0]/3,N],[L+("side-after"===w.aspect?1:-1)*x[p.id][0]/3,X+("tree-down"===K?1:-1)*I/ie],[L+("side-after"===w.aspect?1:-1)*x[p.id][0]/3,X+("tree-down"===K?1:-1)*I/ie],[L+("side-after"===w.aspect?1:-1)*x[p.id][0]/3,X]]):($||(I=ZC._a_(L-A)),[[A,N],[A,X+("side-after"===w.aspect?-1:1)*x[p.id][1]/3],[L+("tree-right"===K?1:-1)*I/ie,X+("side-after"===w.aspect?-1:1)*x[p.id][1]/3],[L+("tree-right"===K?1:-1)*I/ie,X+("side-after"===w.aspect?-1:1)*x[p.id][1]/3],[L,X+("side-after"===w.aspect?-1:1)*x[p.id][1]/3]]),E=!0;break;case"side-between":V=[[A,N],[L,N],[L,X]],E=!0;break;case"arc":he=ZC.AO.JV(L,X,A,N),V.push([L,X]),"tree-up"===K||"tree-down"===K?(k=X-he[1],V.push([L,he[1]+k/ie,he[0],he[1]]),V.push([A,he[1]-k/ie,A,N])):"tree-left"===K||"tree-right"===K?(k=L-he[0],V.push([he[0]+k/ie,X,he[0],he[1]]),V.push([he[0]-k/ie,N,A,N])):"tree-radial"===K&&0<p.level&&(q=ZC.AO.BN(le[b.container].x+le[b.container].width/2,le[b.container].y+le[b.container].height/2,p.radius+(b.radius-p.radius)/5,p.angle),T=ZC.AO.BN(le[b.container].x+le[b.container].width/2,le[b.container].y+le[b.container].height/2,p.radius+4*(b.radius-p.radius)/5,b.angle),V.push([q[0],q[1],he[0],he[1]]),V.push([T[0],T[1],A,N])),V.push([A,N]),E=!1;break;case"split":V.push([L,X]),"tree-up"===K||"tree-down"===K?($||(I=ZC._a_(X-N)),V.push([L,X+I/ie*("tree-down"===K?1:-1)]),V.push([A,X+I/ie*("tree-down"===K?1:-1)])):"tree-left"===K||"tree-right"===K?($||(I=ZC._a_(L-A)),V.push([L+I/ie*("tree-right"===K?1:-1),X]),V.push([L+I/ie*("tree-right"===K?1:-1),N])):"tree-radial"===K&&(Xe=ZC.AO.BN(le[b.container].x+le[b.container].width/2,le[b.container].y+le[b.container].height/2,p.radius+(b.radius-p.radius)/2,p.angle),V.push([Xe[0],Xe[1]]),V.push([le[b.container].x+le[b.container].width/2,le[b.container].y+le[b.container].height/2,p.radius+(b.radius-p.radius)/2,p.angle,b.angle,p.angle>b.angle?1:0])),V.push([A,N]),E=!1;break;case"line":V=[[A,N],[L,X]],E=!0}w.points=V,w.visible=!0,E?Te(w,x[b.id],v[b.id],x[p.id],v[p.id]):Te(w,x[p.id],v[p.id],x[b.id],v[b.id]),oe.push(w)}}zingchart.exec(G.id,"removeobject",{type:"shape",cls:"zctreeshape"}),zingchart.exec(G.id,"addobject",{type:"shape",data:oe.concat(qe(oe)).concat(de)})},"graph"===K?(e(),zingchart.plugins.tree[G.id].navSetup||(r=function(){A=""},zingchart.bind(G.id,"shape_mousedown",function(e){var t,i;0===e.ev.button&&0===e.shape.id.indexOf("node_")&&(t=ZC.Q.MG(e.ev),i=ZC.A5("#"+G.id+"-top").offset(),N=[t[0]-i.left,t[1]-i.top],zingchart.bind(G.id,ZC._[49],r),A=e.shape.id.replace("node_",""))}),zingchart.bind(G.id,"shape_mouseup",r),zingchart.bind(G.id,ZC._[48],function(e){""!==A?(e.ev.preventDefault(),N=[e.x,e.y],Ue(!0),(N[0]<10||N[0]>ue.I-10||N[1]<10||N[1]>ue.F-10)&&r()):"none"===e.target&&(t.LH(),t.A7&&t.A.A7&&t.A7.AN&&ue.A7.onmouseout(e.ev))}),zingchart.bind(G.id,"beforedestroy",function(e){zingchart.plugins.tree[e.id]._render_graph_=null,zingchart.plugins.tree[e.id].navSetup=!1}),zingchart.plugins.tree[G.id].navSetup=!0)):(a(),n||zingchart.plugins.tree[G.id].navSetup||(zingchart.bind(G.id,"shape_click",function(r){0===r.shape.id.indexOf("node_")&&window.setTimeout(function(){for(var e=r["data-tree-index"],t=zingchart.plugins.tree[G.id].data,i=ye(e,!0),n=0;n<i.length;n++)0===n?t[i[n]].collapsed=!t[i[n]].collapsed:t[i[n]].visible=!t[i[n]].visible;a()},33)}),zingchart.plugins.tree[G.id].navSetup=!0)))},zingchart.bind(null,"gcomplete",function(e){t(e)}),zingchart.extendAPI("tree.addnode",function(e,t){var i;zingchart.plugins.tree[e]&&t.data&&(i=!0,null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),(t=t.data).id=t.id||"N"+ZC._r_(1e4,99999),t.text=t.text||t.id,t.type="node",t[ZC._[9]]=t[ZC._[9]]||1,t.container=t.container||0,t.group=t.group||0,zingchart.plugins.tree[e].data.push(t),i&&(l(e),zingchart.plugins.tree[e]._render_graph_()))}),zingchart.extendAPI("tree.removenode",function(e,t){if(zingchart.plugins.tree[e]&&t.id){var i=!0;if(null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),t.id){for(var n=zingchart.plugins.tree[e].data.length-1;0<=n;n--)("node"===zingchart.plugins.tree[e].data[n].type&&zingchart.plugins.tree[e].data[n].id===t.id||"link"===zingchart.plugins.tree[e].data[n].type&&zingchart.plugins.tree[e].data[n].source===t.id||zingchart.plugins.tree[e].data[n].target===t.id)&&zingchart.plugins.tree[e].data.splice(n,1);i&&(l(e),zingchart.plugins.tree[e]._render_graph_())}}}),zingchart.extendAPI("tree.getdata",function(e){return zingchart.plugins.tree[e]?zingchart.plugins.tree[e].data:null}),zingchart.extendAPI("tree.set",function(e,t){var i;return zingchart.plugins.tree[e]&&t.data&&(i=!0,null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),t=t.data,null!==ZC._n_(t["attraction-constant"])&&(zingchart.plugins.tree[e].attractionConstant=ZC._f_(t["attraction-constant"])),null!==ZC._n_(t["repulsion-constant"])&&(zingchart.plugins.tree[e].repulsionConstant=ZC._i_(t["repulsion-constant"])),null!==ZC._n_(t["spring-length"])&&(zingchart.plugins.tree[e].springLength=ZC._f_(t["spring-length"])),i&&(l(e),zingchart.plugins.tree[e]._render_graph_())),null}),zingchart.extendAPI("tree.addlink",function(e,t){if(zingchart.plugins.tree[e]&&t.data){var i=!0,n=(null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),t.data);if(n.source&&n.target){for(var r=0,a=0;a<zingchart.plugins.tree[e].data.length;a++)"node"!==zingchart.plugins.tree[e].data[a].type||zingchart.plugins.tree[e].data[a].id!==n.source&&zingchart.plugins.tree[e].data[a].id!==n.target||r++;2===r&&(n.type="link",n[ZC._[9]]=n[ZC._[9]]||1,zingchart.plugins.tree[e].data.push(n),i&&(l(e),zingchart.plugins.tree[e]._render_graph_()))}}}),zingchart.extendAPI("tree.removelink",function(e,t){if(zingchart.plugins.tree[e]&&t.data){var i=!0,n=(null!==ZC._n_(t.update)&&(i=ZC._b_(t.update)),t.data);if(n.source&&n.target){for(var r=zingchart.plugins.tree[e].data.length-1;0<=r;r--)(zingchart.plugins.tree[e].data[r].source===n.source&&zingchart.plugins.tree[e].data[r].target===n.target||zingchart.plugins.tree[e].data[r].source===n.target&&zingchart.plugins.tree[e].data[r].target===n.source)&&zingchart.plugins.tree[e].data.splice(r,1);i&&(l(e),zingchart.plugins.tree[e]._render_graph_())}}}))}();