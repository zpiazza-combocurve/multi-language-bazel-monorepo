/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.11pre
*/
zingchart.setModule("bubble-legend"),zingchart.plugins.bubblelegend={},zingchart.plugins.bubblelegend.info={},zingchart.bind(null,"complete",function(e){var n=zingchart.getLoader(e.id),e=zingchart.getModules(n);if(-1!==ZC.AV(e,"bubble-legend"))for(var i=0,t=n.AG.length;i<t;i++){var l=!1,a={},r=n.AG[i];if(r.o["bubble-legend"])for(var o=0,d=r.AZ.A3.length;o<d;o++){var b=r.AZ.A3[o];"bubble"!==b.AF&&"hbubble"!==b.AF||(l=!0,a["g"+b.A1E]=a["g"+b.A1E]||{min:Number.MAX_VALUE,max:-Number.MAX_VALUE,maxSize:0,graphid:i,plotindex:b.K,color:"-1"!==b.A2.A0?b.A2.A0:b.BP[1]},a["g"+b.A1E].max=Math.max(a["g"+b.A1E].max,b.WN),a["g"+b.A1E].min=Math.min(a["g"+b.A1E].min,b.RM))}if(l){var g,c=r.o["bubble-legend"]||{},h=c.layout||"v",u=(null===ZC._n_(c.margin)&&(c.margin="v"===h?"auto 10 auto auto":"auto auto 10 auto"),[]),p=0,s=Number.MAX_VALUE,x=0,z=0,_=zingchart.getInstance(r,"textbox");for(g in a)for(x++,C=a[g],v=(y=ZC.AO.WF(C.min,C.max))[3],p=Math.max(p,zingchart.exec(n.L,"getbubblesize",{graphid:C[ZC._[3]],plotindex:C.plotindex,value:y[1]})),s=Math.min(s,zingchart.exec(n.L,"getbubblesize",{graphid:C[ZC._[3]],plotindex:C.plotindex,value:0===y[0]?y[0]+y[2]:y[0]})),L=y[0];L<=y[1];L+=y[2])0<L&&(V={decimals:v,"short":!0,"thousands-separator":",","decimals-separator":"."},ZC._cp_(c.item,V),X=zingchart.formatNumber(y[1],V),_.append({"font-size":10,text:X}),_.append(c.item),_.parse(),z=Math.max(z,_.I));var m=ZC._i_(c.padding||5),f=zingchart.getInstance(r,"box"),A=(f.append({id:r.L+"-bubblelegend-box"}),"v"===h?f.append({width:2*m+2*p+10+z,height:2*m+2*p*x+10*(x-1)+5}):f.append({width:2*m+2*p*x+10*(x-1)+x*z,height:2*m+2*p+30}),f.append(r.o["bubble-legend"]),f.parse(),{type:"rect",x:f.iX+f.I/2,y:f.iY+f.F/2,width:f.I,height:f.F,"background-color":"#fff"}),Z=(ZC._cp_(r.o["bubble-legend"],A),u.push(A),0);for(g in a){for(var y,C=a[g],v=(y=ZC.AO.WF(C.min,C.max))[3],M=[],L=y[0];L<=y[1];L+=y[2])0<L&&M.push(L);var E=[];for(p<15?E.push(M[M.length-1]):!(15<=p&&p<25)&&10<=p-s?E.push(M[0],M[Math.floor(M.length/2.5)],M[M.length-1]):E.push(M[0],M[M.length-1]),L=0;L<E.length;L++){var w,F,N=zingchart.exec(n.L,"getbubblesize",{graphid:C[ZC._[3]],plotindex:C.plotindex,value:E[L]}),V={decimals:v,"short":!0,"thousands-separator":",","decimals-separator":"."},X=(ZC._cp_(c.item,V),zingchart.formatNumber(E[L],V)),I=n.L+"_"+C[ZC._[3]],I=(1<x&&(I+="_"+C.plotindex),F="h"===h?(w=f.iX+Z*(10+2*p+z)+m,f.iY+p+m+15):(w=f.iX+p+m,f.iY+m+2*p+Z*(10+2*p)+5),zingchart.plugins.bubblelegend.info[I]={x:w,y:F,layout:h},{id:r.L+"-bubblelegend-circle_"+Z+"_"+L,type:"circle",size:N,alpha:.25,"background-color":1<x?C.color:"#999","line-style":"dotted","border-width":1,"border-alpha":1,"border-color":"#333"});"h"===h?ZC._cp_({x:w+N,y:F,connector:{"line-width":1,"line-style":"dotted","line-color":"#333",anchor:"l",points:[[w+2*N,F],[w+2*N,L===E.length-1&&3===E.length?F-p/2-5:F+(L%2==0?-1:1)*(p+10)]]}},I):ZC._cp_({x:w,y:F-N,connector:{"line-width":1,"line-style":"dotted","line-color":"#333",anchor:"l",points:[[w,F-2*N],[w+p+10,F-2*N]]}},I),ZC._cp_({label:{color:"#666","font-size":10,align:"left",text:X}},I),ZC._cp_(c.marker,I),ZC._cp_(c.connector,I.connector),ZC._cp_(c.item,I.label),u.push(I)}Z++}zingchart.exec(n.L,"addobject",{type:"shape",data:u})}}}),zingchart.bind(null,"node_mouseout",function(e){var n=zingchart.getLoader(e.id),n=zingchart.getModules(n);-1!==ZC.AV(n,"bubble-legend")&&zingchart.exec(e.id,"removeobject",{type:"shape",dynamic:!0,id:e.id+"_"+e.graphindex+"-bubblelegend-circle"})}),zingchart.bind(null,"node_mouseover",function(e){var n,i=zingchart.getLoader(e.id),i=zingchart.getModules(i);-1!==ZC.AV(i,"bubble-legend")&&null!==ZC._n_(e.size)&&(i=e.id+"_"+e.graphindex,zingchart.plugins.bubblelegend.info[i]||(i+="_"+e.plotindex),n={id:e.id+"_"+e.graphindex+"-bubblelegend-circle",type:"circle",size:e.size,"border-width":1,"border-color":"#333"},"h"===zingchart.plugins.bubblelegend.info[i].layout?(n.x=zingchart.plugins.bubblelegend.info[i].x+e.size,n.y=zingchart.plugins.bubblelegend.info[i].y):(n.x=zingchart.plugins.bubblelegend.info[i].x,n.y=zingchart.plugins.bubblelegend.info[i].y-e.size),zingchart.exec(e.id,"addobject",{type:"shape",dynamic:!0,data:n}))});