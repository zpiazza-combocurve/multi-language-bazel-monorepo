/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.11pre
*/
ZC.WG.push("maps"),zingchart.maps||(zingchart.maps={},zingchart.maps.maps={},zingchart.maps.data={}),zingchart.maps.FORCESCALE=0,zingchart.maps.CONNECTORS=1,zingchart.maps.LITE=0,zingchart.maps._DEFAULTS_={_COMMON_:{label:{"font-size":9,padding:"1 2",overlap:!1},tooltip:{"border-radius":6,"background-color":"#fff",color:"#303030","border-width":1,"border-color":"#909090",padding:10}},_POLY_:{alpha:.9,shadow:!0,"shadow-distance":3,"shadow-color":"#ccc","border-width":1,"border-color":"#a3a3a3","background-color":"#e3e3e3","hover-state":{shadow:!0,"background-color":"#d3d3d3","offset-x":-1,"offset-y":-1,"shadow-distance":3},connector:{"line-color":"#666","line-width":1}},_LINE_:{alpha:1,shadow:!1,"line-width":2,"line-color":"#4ea8fc","hover-state":{"line-color":"#4ec8cc","offset-x":0,"offset-y":0,shadow:!1}},_POINT_:{alpha:1,size:3,shadow:!1,"background-color":"#333","hover-state":{"offset-x":0,"offset-y":0,shadow:!1,"border-width":1,"border-color":"#aaa","background-color":"#666"},label:{"font-size":10,"offset-y":8}}},zingchart.maps.LIGHT={"background-color":"#fff",_COMMON_:{label:{"font-size":9,padding:"1 2",overlap:!1},tooltip:{"border-radius":6,"background-color":"#fff",color:"#303030","border-width":1,"border-color":"#909090",padding:10}},_POLY_:{alpha:1,"border-width":1,"border-color":"#fff","background-color":"#DDDDDD","hover-state":{"background-color":"#C4C4C4"},connector:{"line-color":"#666","line-width":1}},_LINE_:{alpha:1,shadow:!1,"line-width":2,"line-color":"#4ea8fc","hover-state":{"line-color":"#4ec8cc","offset-x":0,"offset-y":0,shadow:!1}},_POINT_:{alpha:1,size:3,shadow:!1,"background-color":"#333","hover-state":{"offset-x":0,"offset-y":0,shadow:!1,"border-width":1,"border-color":"#aaa","background-color":"#666"},label:{"font-size":10,"offset-y":8}}},zingchart.maps.DARK={"background-color":"#221F1F",_COMMON_:{label:{"font-size":9,padding:"1 2"},tooltip:{"border-radius":6,"background-color":"#fff",color:"#303030","border-width":1,"border-color":"#909090",padding:10}},_POLY_:{alpha:1,"border-width":1,"border-color":"#221F1F","background-color":"#DDDDDD","hover-state":{"background-color":"#C4C4C4"},connector:{"line-color":"#DDDDDD","line-width":1}},_LINE_:{alpha:1,shadow:!1,"line-width":2,"line-color":"#4ea8fc","hover-state":{"line-color":"#4ec8cc","offset-x":0,"offset-y":0,shadow:!1}},_POINT_:{alpha:1,size:3,shadow:!1,"background-color":"#333","hover-state":{"offset-x":0,"offset-y":0,shadow:!1,"border-width":1,"border-color":"#aaa","background-color":"#666"},label:{"font-size":10,"offset-y":8}}},zingchart.maps.upgrade=function(o){var a,t,e=zingchart.maps.data,i=o.split(".");for(a in 1===i.length?e=e[o]:2===i.length&&(e=e[i[0]][i[1]]),e)"_GROUPS_"!==a&&"_DEFAULTS_"!==a&&"_RULES_"!==a&&null===ZC._n_(e[a].cpoint)&&(null!==ZC._n_(e[a].label.x)&&null!==ZC._n_(e[a].label.y)?e[a].cpoint={x:e[a].label.x,y:e[a].label.y}:(t="point"===e[a].type?e[a].coords[0]:"line"===e[a].type?(t=ZC._i_(e[a].coords.length/2),e[a].coords[t]||e[a].coords[t+1]||e[a].coords[t-1]):zingchart.maps.centroid(e[a].coords),e[a].cpoint={x:t[0].toFixed(4)+"lon",y:t[1].toFixed(4)+"lat"},e[a].label.x=t[0].toFixed(4)+"lon",e[a].label.y=t[1].toFixed(4)+"lat"))},zingchart.maps.centroid=function(o){for(var a,t,e=0,i=0,r=0,n=0,_=o.length;n<_-1;n++)null!==ZC._n_(a=o[n])&&null!==ZC._n_(t=o[n+1])&&(r+=a[0]*t[1]-t[0]*a[1],e+=(a[0]+t[0])*(a[0]*t[1]-t[0]*a[1]),i+=(a[1]+t[1])*(a[0]*t[1]-t[0]*a[1]));return[e/=6*(r*=.5),i/=6*r,r]},zingchart.maps.getMapByGraphIndex=function(o,a){var t,e;for(e in zingchart.maps.maps)if((t=zingchart.maps.maps[e])._INFO_.loaderid===o&&t._INFO_.graphinfo.graph.index===a)return t;return null},zingchart.maps.zoomIn=function(A4C){var oMap=zingchart.maps.maps[A4C]||eval("zingchart.maps.data."+A4C),fZoomRatio;oMap&&oMap._INFO_&&(fZoomRatio=1.25,oMap._INFO_.zoom*=fZoomRatio,zingchart.maps.setView(oMap._INFO_.loaderid,oMap._INFO_.id,oMap._INFO_.zoom,oMap._INFO_.offsetX,oMap._INFO_.offsetY),ZC.AQ.C0("maps.zoom",zingchart.getLoader(oMap._INFO_.loaderid),oMap._INFO_))},zingchart.maps.zoomOut=function(A4C){var oMap=zingchart.maps.maps[A4C]||eval("zingchart.maps.data."+A4C),H,C,fZoomRatio,iCX,iCY,iMouseX,iMouseY,ED,aCP,aLonLat,ED,OS,A00;oMap&&oMap._INFO_&&(H=zingchart.getLoader(oMap._INFO_.loaderid),C=H.AG[oMap._INFO_.graphinfo.graph.index],fZoomRatio=1.25,iCX=C.iX+C.I/2,iCY=C.iY+C.F/2,iMouseX=C.I/2,iMouseY=C.F/2,aCP=[(oMap._INFO_.bbox[0]+oMap._INFO_.bbox[2])/2,(oMap._INFO_.bbox[1]+oMap._INFO_.bbox[3])/2],aLonLat=zingchart.maps.getLonLat(oMap._INFO_.id,[iMouseX,iMouseY]),oMap._INFO_.zoom=Math.max(.1,oMap._INFO_.zoom/fZoomRatio),oMap._INFO_.zoom>fZoomRatio?(ED=zingchart.maps.getXY(oMap._INFO_.id,aLonLat),oMap._INFO_.offsetX-=ED[0]-iMouseX,oMap._INFO_.offsetY-=ED[1]-iMouseY):(ED=zingchart.maps.getXY(oMap._INFO_.id,aCP),OS=ED[0]-iCX,A00=ED[1]-iCY/2,oMap._INFO_.offsetX=OS*((oMap._INFO_.zoom-1)/5),oMap._INFO_.offsetY=A00*((oMap._INFO_.zoom-1)/5)),zingchart.maps.setView(oMap._INFO_.loaderid,oMap._INFO_.id,oMap._INFO_.zoom,oMap._INFO_.offsetX,oMap._INFO_.offsetY),ZC.AQ.C0("maps.zoom",zingchart.getLoader(oMap._INFO_.loaderid),oMap._INFO_))},zingchart.maps.destroyMap=function(o){delete zingchart.maps.maps[o]},zingchart.maps.setView=function(L,A4C,fZoom,fOffsetX,fOffsetY){for(var H=zingchart.getLoader(L),LF=0,iShapeIndex=0,g=0;g<H.o[ZC._[16]].length;g++)if(H.o[ZC._[16]][g].shapes)for(var s=0;s<H.o[ZC._[16]][g].shapes.length;s++)if("zingchart.maps"===H.o[ZC._[16]][g].shapes[s].type&&H.o[ZC._[16]][g].shapes[s].options&&(H.o[ZC._[16]][g].shapes[s].options.id===A4C||H.o[ZC._[16]][g].shapes[s].options.name===A4C)){LF=g,iShapeIndex=s;break}var WO=H.o[ZC._[16]][LF].shapes[iShapeIndex],oMap;WO.options=WO.options||{},WO.options.zoom=Math.abs(ZC._f_(fZoom||"1")),WO.options["offset-x"]=ZC._i_(fOffsetX||"0"),WO.options["offset-y"]=ZC._i_(fOffsetY||"0"),WO.options.style=WO.options.style||{},WO.options.style.label=WO.options.style.label||{},null===ZC._n_(WO.options.style.label.visible_)&&(WO.options.style&&WO.options.style.label?WO.options.style.label.visible_=null===ZC._n_(WO.options.style.label.visible)||WO.options.style.label.visible:(WO.options.style=WO.options.style||{},WO.options.style.label=WO.options.style.label||{},WO.options.style.label.visible_=!0)),ZC._n_(WO.options.style.label["adjust-font-size"])&&ZC._b_(WO.options.style.label["adjust-font-size"])&&(oMap=zingchart.maps.maps[A4C]||eval("zingchart.maps.data."+A4C),oMap&&oMap._INFO_&&(oMap._INFO_.baseFontSize||(oMap._INFO_.baseFontSize=11,WO.options.style.label["font-size"]&&(oMap._INFO_.baseFontSize=ZC._i_(WO.options.style.label["font-size"]))),WO.options.style.label["font-size"]=Math.min(19,oMap._INFO_.baseFontSize*oMap._INFO_.zoom*.65))),zingchart.maps.SKIP_LABELS?WO.options.style.label.visible=!1:(WO.options.style.label.visible=null===ZC._n_(WO.options.style.label.visible_)||WO.options.style.label.visible_,WO.options.style.label.visible_=null),H.clearGenerated(),zingchart.exec(L,"setdata",{data:H.o})},zingchart.bind(null,"shape_mouseover",function(o){var a=zingchart.getLoader(o.id),t=ZC.Q.MG(o.ev),t=a.A5C(t[0],t[1]);t&&(a=zingchart.maps.getMapByGraphIndex(o.id,t.K))&&a._INFO_["color-scale"]&&zingchart.plugins.colorscale&&zingchart.plugins.colorscale.info&&zingchart.plugins.colorscale.info[o.id+"_"+t.K]&&zingchart.plugins.colorscale.AGM(o.id,{graphid:o.graphid,value:o["data-value"]})}),zingchart.bind(null,"shape_mouseout",function(o){var a=zingchart.getLoader(o.id),t=ZC.Q.MG(o.ev),t=a.A5C(t[0],t[1]);t&&(a=zingchart.maps.getMapByGraphIndex(o.id,t.K))&&a._INFO_["color-scale"]&&zingchart.plugins.colorscale&&zingchart.plugins.colorscale.info&&zingchart.plugins.colorscale.info[o.id+"_"+t.K]&&zingchart.plugins.colorscale.clear(o.id,{graphid:o.graphid})}),zingchart.bind(null,"shape_dblclick",function(o){var a=zingchart.getLoader(o.id),t=ZC.Q.MG(o.ev),t=a.A5C(t[0],t[1]);t&&(a=zingchart.maps.getMapByGraphIndex(o.id,t.K))&&a._INFO_.zooming&&zingchart.maps.zoomToItem(a._INFO_.id,o.shapeid)}),zingchart.bind(null,"label_click",function(o){var a=zingchart.getLoader(o.id),t=ZC.Q.MG(o.ev),t=a.A5C(t[0],t[1]);t&&(a=zingchart.maps.getMapByGraphIndex(o.id,t.K))&&(o.labelid===a._INFO_.id+"_zoom_in"?zingchart.maps.zoomIn(a._INFO_.id):o.labelid===a._INFO_.id+"_zoom_out"&&zingchart.maps.zoomOut(a._INFO_.id))}),zingchart.bind(null,ZC._[47],function(o){var a,t;0!==o.ev.button||"none"!==o.target&&"shape"!==o.target||(t=zingchart.getLoader(o.id),a=ZC.Q.MG(o.ev),o.ev.preventDefault(),(a=t.A5C(a[0],a[1]))&&(t=zingchart.maps.getMapByGraphIndex(o.id,a.K))&&t._INFO_.panning&&(zingchart.maps.MD=!0,zingchart.maps.REFX=o.ev.pageX,zingchart.maps.REFY=o.ev.pageY,zingchart.maps.OFFX=0,zingchart.maps.OFFY=0,zingchart.maps.REFOFFX=t._INFO_.offsetX,zingchart.maps.REFOFFY=t._INFO_.offsetY))}),zingchart.bind(null,ZC._[48],function(o){var a,t;zingchart.maps.MD&&(t=zingchart.getLoader(o.id),a=ZC.Q.MG(o.ev),(a=t.A5C(a[0],a[1]))&&(t=zingchart.maps.getMapByGraphIndex(o.id,a.K))&&(zingchart.maps.OFFX=zingchart.maps.REFOFFX+o.ev.pageX-zingchart.maps.REFX,zingchart.maps.OFFY=zingchart.maps.REFOFFY+o.ev.pageY-zingchart.maps.REFY,5<ZC._a_(zingchart.maps.REFOFFX-zingchart.maps.OFFX)+ZC._a_(zingchart.maps.REFOFFY-zingchart.maps.OFFY)&&(zingchart.maps.setView(o.id,t._INFO_.id,t._INFO_.zoom,zingchart.maps.OFFX,zingchart.maps.OFFY),ZC.AQ.C0("maps.zoom",zingchart.getLoader(t._INFO_.loaderid),t._INFO_))))}),zingchart.bind(null,ZC._[49],function(o){var a,t;zingchart.maps.MD&&(a=zingchart.getLoader(o.id),t=ZC.Q.MG(o.ev),(t=a.A5C(t[0],t[1]))&&zingchart.maps.getMapByGraphIndex(o.id,t.K)&&(zingchart.maps.MD=!1,zingchart.maps.REFOFFX=zingchart.maps.OFFX,zingchart.maps.REFOFFY=zingchart.maps.OFFY))}),zingchart.bind(null,"mousewheel",function(o){var a,t,e,i,r,n,_=zingchart.getLoader(o.id),s=ZC.Q.MG(o.ev),p=_.A5C(s[0],s[1]);p&&(a=zingchart.maps.getMapByGraphIndex(o.id,p.K),t=p.iX+p.I/2,e=p.iY+p.F/2,a&&a._INFO_.scrolling&&!o.ev.altKey&&(o.ev.preventDefault(),_=ZC.A5("#"+_.L+"-top"),i=s[0]-_.offset().left-p.iX,s=s[1]-_.offset().top-p.iY,0<o.ev.wheelDelta?(n=zingchart.maps.getLonLat(a._INFO_.id,[i,s]),a._INFO_.zoom*=1.25,r=zingchart.maps.getXY(a._INFO_.id,n),a._INFO_.offsetX-=r[0]-i,a._INFO_.offsetY-=r[1]-s):(_=[(a._INFO_.bbox[0]+a._INFO_.bbox[2])/2,(a._INFO_.bbox[1]+a._INFO_.bbox[3])/2],n=zingchart.maps.getLonLat(a._INFO_.id,[i,s]),a._INFO_.zoom=Math.max(1,a._INFO_.zoom/1.25),1.25<a._INFO_.zoom?(r=zingchart.maps.getXY(a._INFO_.id,n),a._INFO_.offsetX-=r[0]-i,a._INFO_.offsetY-=r[1]-s):(p=(r=zingchart.maps.getXY(a._INFO_.id,_))[0]-t,n=r[1]-e/2,a._INFO_.offsetX=p*((a._INFO_.zoom-1)/5),a._INFO_.offsetY=n*((a._INFO_.zoom-1)/5))),zingchart.maps.setView(o.id,a._INFO_.id,a._INFO_.zoom,a._INFO_.offsetX,a._INFO_.offsetY),ZC.AQ.C0("maps.zoom",zingchart.getLoader(a._INFO_.loaderid),a._INFO_)))}),zingchart.maps.viewAll=function(A4C){var oMap=zingchart.maps.maps[A4C];(oMap||(oMap=eval("zingchart.maps.data."+A4C),oMap))&&zingchart.maps.zoomTo(A4C,{zoom:1,offsetX:0,offsetY:0})},zingchart.maps.zoomToItem=function(A4C,AAO){var oMap,BR,fMapW,fMapH,fMapCX,fMapCY,fItemW,fItemH,fItemCX,fItemCY,fRatio,fZoom,fFactorW,fFactorH,fDiffX,fDiffY,fOffX,fOffY;if(oMap=zingchart.maps.maps[A4C]){if(!(BR=oMap[AAO]))return}else if(oMap=eval("zingchart.maps.data."+A4C),!oMap||!(BR=oMap[AAO]))return;oMap._INFO_&&(fMapW=oMap._INFO_.bbox[2]-oMap._INFO_.bbox[0],fMapH=oMap._INFO_.bbox[1]-oMap._INFO_.bbox[3],fMapCX=(oMap._INFO_.bbox[2]+oMap._INFO_.bbox[0])/2,fMapCY=(oMap._INFO_.bbox[1]+oMap._INFO_.bbox[3])/2,fItemW=BR.bbox[2]-BR.bbox[0],fItemH=BR.bbox[1]-BR.bbox[3],fItemCX=(BR.bbox[2]+BR.bbox[0])/2,fItemCY=(BR.bbox[1]+BR.bbox[3])/2,fRatio=Math.min(fMapW/fItemW,fMapH/fItemH),fZoom=fRatio,fFactorW=oMap._INFO_.width/fMapW,fFactorH=oMap._INFO_.height/fMapH,fDiffX=fMapCX-fItemCX,fDiffY=fItemCY-fMapCY,fOffX=fRatio*(fDiffX*fFactorW),fOffY=fRatio*(fDiffY*fFactorH),zingchart.maps.zoomTo(A4C,{zoom:fZoom,offsetX:fOffX,offsetY:fOffY}))},zingchart.maps.zoomTo=function(A4C,BB){var oMap=zingchart.maps.maps[A4C]||eval("zingchart.maps.data."+A4C),MX,Y,RD,iZoomTick;oMap&&(MX={zoom:oMap._INFO_.zoom,offsetX:oMap._INFO_.offsetX,offsetY:oMap._INFO_.offsetY},zingchart.exec(oMap._INFO_.loaderid,"setobjectsmode",{mode:"flat"}),zingchart.maps.SKIP_LABELS=!0,Y=0,RD=10,iZoomTick=window.setInterval(function(){var o="regularEaseOut",a=ZC.E6[o](Y,MX.zoom,BB.zoom-MX.zoom,RD),t=ZC.E6[o](Y,MX.offsetX,BB.offsetX-MX.offsetX,RD),o=ZC.E6[o](Y,MX.offsetY,BB.offsetY-MX.offsetY,RD);Y===RD&&(zingchart.maps.SKIP_LABELS=!1,zingchart.exec(oMap._INFO_.loaderid,"setobjectsmode",{mode:"normal"})),zingchart.maps.setView(oMap._INFO_.loaderid,A4C,a,t,o),RD<++Y&&(window.clearInterval(iZoomTick),oMap._INFO_.zoom=BB.fZoom,oMap._INFO_.offsetX=BB.fOffX,oMap._INFO_.offsetY=BB.fOffY,ZC.AQ.C0("maps.zoom",zingchart.getLoader(oMap._INFO_.loaderid),oMap._INFO_))},1))},zingchart.maps.getInfo=function(A4C){var oMap=zingchart.maps.maps[A4C],oMap=oMap||eval("zingchart.maps.data."+A4C);return oMap},zingchart.maps.getItems=function(A4C){var oMap=zingchart.maps.maps[A4C],oMap=oMap||eval("zingchart.maps.data."+A4C);if(oMap){var B6=[],sItem;for(sItem in oMap)"_DEFAULTS_"===sItem||"_INFO_"===sItem||"_GROUPS_"===sItem||"_RULES_"===sItem||oMap._INFO_&&-1===ZC.AV(oMap._INFO_.items,sItem)||B6.push(sItem);return B6}return null},zingchart.maps.getItemInfo=function(A4C,AAO){var oMap,BR;if(oMap=zingchart.maps.maps[A4C]){if(BR=oMap[AAO])return BR}else if(oMap=eval("zingchart.maps.data."+A4C),oMap&&(BR=oMap[AAO]))return BR;return null},zingchart.maps.getXY=function(o,a,t){var e,i;return t=t||"",(e=zingchart.maps.maps[o])?(i={},ZC._cp_(e._INFO_,i),""!==t&&ZC._cp_({map:o,item:t},i),zingchart.maps.lonlat2xy(e._INFO_.x,e._INFO_.y,e._INFO_.width,e._INFO_.height,a,e._INFO_.bbox,i)):null},zingchart.maps.getLonLat=function(o,a){return(o=zingchart.maps.maps[o])?zingchart.maps.xy2lonlat(o._INFO_.x,o._INFO_.y,o._INFO_.width,o._INFO_.height,a,o._INFO_.bbox,o._INFO_):null},zingchart.maps.registerMap=function(e,o){ZC.WG.push("maps-"+e),zingchart.maps[e]||(zingchart.maps[e]={}),zingchart.maps.data[e]||(zingchart.maps.data[e]=o),zingchart.maps.data[e]._GROUPS_={},zingchart.maps.data[e]._DEFAULTS_=zingchart.maps._DEFAULTS_,zingchart.maps[e]=function(o,a,t){return zingchart.maps.convert({loader:this,loaderdata:a||{},graphid:typeof o.graphid===ZC._[31]?0:o.graphid,data:t,id:o.id||e,x:typeof o.x===ZC._[31]?0:o.x,y:typeof o.y===ZC._[31]?0:o.y,width:typeof o.width===ZC._[31]?1:o.width,height:typeof o.height===ZC._[31]?1:o.height,level:typeof o.level===ZC._[31]?1:o.level,groups:o.groups||[],items:o.items||[],ignore:o.ignore||[],bbox:o.bbox||null,map:zingchart.maps.data[e]})}},zingchart.maps.lonlat2xy=function(iX,iY,I,F,aLonLat,aBBox,BJ,bTranslate){typeof bTranslate===ZC._[31]&&(bTranslate=!1),BJ=BJ||{};var iZoom=Math.abs(ZC._f_(BJ.zoom||"1")),BK=ZC._i_(BJ.offsetX||"0"),BI=ZC._i_(BJ.offsetY||"0"),fLonRatio=I/ZC._a_(aBBox[2]-aBBox[0]),fLatRatio=F/ZC._a_(aBBox[3]-aBBox[1]),iPx=(fLonRatio*=iZoom,fLatRatio*=iZoom,iX-=I*(iZoom-1)/2,iY+=F*(iZoom-1)/2,iX+=BK,iY+=BI,iX+(ZC._f_(aLonLat[0])-ZC.CY(aBBox[0],aBBox[2]))*fLonRatio),iPy=iY+F-(ZC._f_(aLonLat[1])-ZC.CY(aBBox[1],aBBox[3]))*fLatRatio,oMap,BR,oItemX,oItemY,oItemHeight,iPx,iPy,oMap;return BJ&&BJ.map&&(oMap=zingchart.maps.maps[BJ.map],oMap=oMap||eval("zingchart.maps.data."+BJ.map),oMap&&((BR=oMap[BJ.item])&&(iPx+=BR.transform.offsetLon*fLonRatio,iPy-=BR.transform.offsetLat*fLatRatio,1!==BR.transform.scale&&(oItemX=iX+(ZC.CY(BR.bbox[0],BR.bbox[2])-ZC.CY(aBBox[0],aBBox[2]))*fLonRatio,oItemY=iY+F-(ZC.CY(BR.bbox[1],BR.bbox[3])-ZC.CY(aBBox[1],aBBox[3]))*fLatRatio,oItemHeight=ZC._a_(BR.bbox[3]-BR.bbox[1])*fLatRatio,iPx=oItemX+(iPx-oItemX)*BR.transform.scale,iPy=oItemY-oItemHeight+(iPy-(oItemY-oItemHeight))*BR.transform.scale)),bTranslate&&(iPx+=oMap._INFO_.graphinfo.graph.x,iPy+=oMap._INFO_.graphinfo.graph.y))),[iPx,iPy]},zingchart.maps.xy2lonlat=function(o,a,t,e,i,r,n){n=n||{};var _=Math.abs(ZC._f_(n.zoom||"1")),s=ZC._i_(n.offsetX||"0"),n=ZC._i_(n.offsetY||"0"),t=(o-=t*(_-1)/2,a-=e*(_-1)/2,t/ZC._a_(r[2]-r[0])),e=e/ZC._a_(r[3]-r[1]);return[r[0]+(i[0]-o-s)/(t*=_),r[1]+(a-i[1]+n)/(e*=_)]},zingchart.maps.mappoints=function(o,a,t,e,i,r,n,_,s){var p=[],l=null,c=t/ZC._a_(i[2]-i[0]),f=e/ZC._a_(i[3]-i[1]),h=(_=_||{},Math.abs(ZC._f_(_.zoom||"1"))),g=ZC._i_(_.offsetX||"0");c*=h,f*=h,a=a-e*(h-1)/2+ZC._i_(_.offsetY||"0");for(var d=(o=o-t*(h-1)/2+g)+(ZC.CY(r.bbox[0],r.bbox[2])-ZC.CY(i[0],i[2]))*c,m=a+e*h-(ZC.CY(r.bbox[1],r.bbox[3])-ZC.CY(i[1],i[3]))*f,C=(ZC._a_(r.bbox[2]-r.bbox[0]),ZC._a_(r.bbox[3]-r.bbox[1])*f),b=0,O=r.coords.length;b<O;b++)if(null===ZC._n_(r.coords[b]))p.push(null);else{var z,Z,F,I,u=r.transform.offsetLon,x=r.transform.offsetLat,M=r.transform.scale;if("__"===r.id&&null!==ZC._n_(n))for(var N=0,y=n.length;N<y;N++)if(r.coords[b][0]>=n[N].bbox[0]-n[N].offsetLon&&r.coords[b][0]<=n[N].bbox[2]-n[N].offsetLon&&r.coords[b][1]>=n[N].bbox[3]-n[N].offsetLat&&r.coords[b][1]<=n[N].bbox[1]-n[N].offsetLat){u=n[N].offsetLon,x=n[N].offsetLat,M=n[N].scale,l=n[N].bbox;break}F=o+(r.coords[b][0]-ZC.CY(i[0],i[2]))*c+u*c,I=a+(ZC.BQ(i[1],i[3])-r.coords[b][1])*f-x*f,1!==M&&(I="__"===r.id?(F=(z=o+(ZC.CY(l[0],l[2])-ZC.CY(i[0],i[2]))*c)+(F-z)*M,(z=a+e-(ZC.CY(l[1],l[3])-ZC.CY(i[1],i[3]))*f)-(Z=ZC._a_(l[3]-l[1])*f)+(I-(z-Z))*M):(F=d+(F-d)*M,m-C+(I-(m-C))*M)),null!==ZC._n_(s)?p.push([parseInt(F,10)-ZC.AP.E4,parseInt(I,10)-ZC.AP.E5,parseInt(s,10)]):p.push([parseInt(F,10),parseInt(I,10)])}return p},zingchart.maps.translate=function(o,a,t,e,i){t/=ZC._a_(i[2]-i[0]),e/=ZC._a_(i[3]-i[1]);return"x"===o?a*t:a*e},zingchart.maps.convert=function(o){var a,t,e=o.data.options||{},E=(ZC._todash_(e),o.id),i=o.groups,S=o.items,D=o.ignore,r=o.bbox,n=o.level,w=!1,U=("01"===n&&(n=1,w=!0),Math.abs(ZC._f_(e.zoom||"1"))),P=ZC._i_(e["offset-x"]||"0"),T=ZC._i_(e["offset-y"]||"0"),_=!0,W=!0,G=!0,s=(null!==ZC._n_(e.zooming)&&(_=ZC._b_(e.zooming)),null!==ZC._n_(e.panning)&&(W=ZC._b_(e.panning)),null!==ZC._n_(e.scrolling)&&(G=ZC._b_(e.scrolling)),o.loader.A5I(o.loaderdata,o.graphid)),p=(o.loader.MB&&(z=o.loader.MB.theme||"light"),"light"===(z=o.loader.o?o.loader.o.theme||"light":z)?o.map._DEFAULTS_=zingchart.maps.LIGHT:"dark"===z&&(o.map._DEFAULTS_=zingchart.maps.DARK),ZC.AP&&(ZC.AP.A4E=2.5*ZC.BQ(s.graph.width,s.graph.height),ZC.AP.E4=s.plotarea.x+s.plotarea.width/2,ZC.AP.E5=s.plotarea.y+s.plotarea.height/2),ZC.IK(o.x)),p=ZC._i_(0<p&&p<1?p*s.plotarea.width:p),l=(p+=s.plotarea.x,ZC.IK(o.y)),l=ZC._i_(0<p&&l<1?l*s.plotarea.height:l),c=(l+=s.plotarea.y,ZC.IK(o.width)),c=ZC._i_(c<=1?c*s.plotarea.width:c),f=ZC.IK(o.height),f=ZC._i_(f<=1?f*s.plotarea.height:f),h={};if(ZC._cp_(o.map,h),0===c||0===f||!h)return[];for(a in h)"_DEFAULTS_"!==a&&"_INFO_"!==a&&"_GROUPS_"!==a&&"_RULES_"!==a&&(null===ZC._n_(h[a].transform)&&(h[a].transform={offsetLon:0,offsetLat:0,scale:1}),null===ZC._n_(h[a].connector)&&(h[a].connector={points:[],anchor:""}));for(a in h)if("_DEFAULTS_"!==a&&"_INFO_"!==a&&"_GROUPS_"!==a&&"_RULES_"!==a&&!(0===n&&"__"!==a||0!==n&&"__"===a&&!w)){for(var g=[ZC.MAX,-ZC.MAX,-ZC.MAX,ZC.MAX],k=h[a].transform.offsetLon,H=h[a].transform.offsetLat,Q=h[a].transform.scale,d=0;d<h[a].coords.length;d++)if(null!==ZC._n_(h[a].coords[d])){if("__"===a&&null!==ZC._n_(h._RULES_))for(var m=0,K=h._RULES_.length;m<K;m++)if(h[a].coords[d][0]>=h._RULES_[m].bbox[0]-h._RULES_[m].offsetLon&&h[a].coords[d][0]<=h._RULES_[m].bbox[2]-h._RULES_[m].offsetLon&&h[a].coords[d][1]>=h._RULES_[m].bbox[3]-h._RULES_[m].offsetLat&&h[a].coords[d][1]<=h._RULES_[m].bbox[1]-h._RULES_[m].offsetLat){k=h._RULES_[m].offsetLon,H=h._RULES_[m].offsetLat,Q=h._RULES_[m].scale;break}g[0]=ZC.CY(g[0],h[a].coords[d][0]+k),g[1]=ZC.BQ(g[1],h[a].coords[d][1]+H),g[2]=ZC.BQ(g[2],h[a].coords[d][0]+k),g[3]=ZC.CY(g[3],h[a].coords[d][1]+H)}1!==Q&&"__"!==a&&(g[2]=g[0]+(g[2]-g[0])*Q,g[3]=g[1]-(g[1]-g[3])*Q),h[a].id=a,h[a].bbox=g}g=[ZC.MAX,-ZC.MAX,-ZC.MAX,ZC.MAX];var V,J,C=[];if(0<i.length&&h._GROUPS_){for(d=0,t=i.length;d<t;d++)h._GROUPS_[i[d]]&&(C=C.concat(h._GROUPS_[i[d]]));for(d=C.length-1;0<=d;d--)-1===C[d].indexOf("@")?-1!==ZC.AV(D,C[d])&&C.splice(d,1):(V=C[d].split("@"),-1!==ZC.AV(D,V[0])&&C.splice(d,1))}if(0<S.length)for(d=0,t=S.length;d<t;d++)-1===ZC.AV(D,S[d])&&C.push(S[d]);else for(a in h)!h.hasOwnProperty(a)||"_DEFAULTS_"===a||"_INFO_"===a||"_GROUPS_"===a||"_RULES_"===a||0===n&&"__"!==a||0!==n&&"__"===a&&!w||0===i.length&&-1===ZC.AV(D,a)&&C.push(a);for(d=C.length-1;0<=d;d--)C[d]&&-1!==C[d].indexOf("@")&&(J=C[d].split("@"),-1!==ZC.AV(C,J[0])&&C.splice(d,1));if(null!==ZC._n_(r)&&4===r.length)g=r;else for(d=0,t=C.length;d<t;d++)h[a=C[d]]&&(g[0]=ZC.CY(g[0],h[a].bbox[0]),g[1]=ZC.BQ(g[1],h[a].bbox[1]),g[2]=ZC.BQ(g[2],h[a].bbox[2]),g[3]=ZC.CY(g[3],h[a].bbox[3]));var j=ZC._a_(g[2]-g[0])/20,q=ZC._a_(g[3]-g[1])/20;for(a in g[0]-=j,g[1]+=q,g[2]+=j,g[3]-=q,h)"_DEFAULTS_"===a||"_INFO_"===a||"_GROUPS_"===a||"_RULES_"===a||0===n&&"__"!==a||0!==n&&"__"===a&&!w||(j=ZC.CY(1,ZC._a_(h[a].bbox[2]-h[a].bbox[0])/8),q=ZC.CY(1,ZC._a_(h[a].bbox[3]-h[a].bbox[1])/8),h[a].bbox[0]-=j,h[a].bbox[1]+=q,h[a].bbox[2]+=j,h[a].bbox[3]-=q);var b,$,O,z=1+.8*ZC._a_((g[3]+g[1])/180),r=c/ZC._a_(g[2]-g[0]),oo=f/ZC._a_(g[3]-g[1]);for($ in(!e.hasOwnProperty("scale")||ZC._b_(e.scale))&&(1.05<(b=z*r/oo)?(p+=(c-(so=ZC._i_(c/b)))/2,c=so):b<.95&&(l+=(f-(so=ZC._i_(f*b)))/2,f=so),r=c/ZC._a_(g[2]-g[0]),oo=f/ZC._a_(g[3]-g[1])),zingchart.maps.maps)E===$||(O=zingchart.maps.maps[$])&&O._INFO_&&o.loader.L===O._INFO_.loaderid&&O._INFO_.graphinfo&&O._INFO_.graphinfo.graph&&O._INFO_.graphinfo.graph.index===s.graph.index&&(O._INFO_.graphinfo.graph.index=-1);h._INFO_={loaderid:o.loader.L,x:p,y:l,zoom:U,zooming:_,panning:W,scrolling:G,offsetX:P,offsetY:T,width:c,height:f,id:E,bbox:g,groups:i,items:C,ignore:D,graphinfo:s},3*C.length>zingchart.DEV.MAXPOOLSIZE&&(zingchart.DEV.MAXPOOLSIZE+=3*C.length),zingchart.maps.maps[E]=h;var Z,F={},I={};if(Z=e.choropleth){var u,x=ZC.MAX,M=-ZC.MAX,N="";for(d=0,t=C.length;d<t;d++)a=C[d],null!==ZC._n_(e.style)&&null!==ZC._n_(e.style.items)&&null!==ZC._n_(e.style.items[a])&&null!==ZC._n_(e.style.items[a]["data-value"])&&(u=ZC._f_(e.style.items[a]["data-value"]),x=Math.min(x,u),M=Math.max(M,u),I[a]={"data-value":u});var ao=Z.aspect||"gradient",to=Z.progression||"lin",y=Z.intervals||4,eo=Z.color||"#336699",L=Z["max-percent"]||50,io=Z.effect||"lighten",ro=ZC._b_(Z.mirrored),no=L/(M-x),_o=("log"===to&&(no=L/(ZC.FS(M,10)-ZC.FS(x,10))),L/y),so=Z[ZC._[10]]||[],v=Z.steps||[],po=Z.colors||[];if("intervals"===ao){if(v.length)y=v.length-1;else if("lin"===to){var lo=(M-x)/y;for(d=0;d<y;d+=1)v.push(x+d*lo);v.push(M)}else{var co=Math.floor(ZC.FS(x,10)),fo=Math.ceil(ZC.FS(M,10));for(co===fo&&fo++,y=Math.max(1,fo-co-1),d=co;d<=fo;d+=1)d===co&&co<1?v.push(0):v.push(Math.pow(10,d));_o=L/y}if(!po.length)for(d=0;d<=y;d+=1)po.push("lighten"===io?ZC.AQ.R0(eo,d*_o):ZC.AQ.JN(eo,d*_o))}for(d=0,t=C.length;d<t;d++)if(I[a=C[d]]){if(u=I[a]["data-value"],"gradient"===ao){var ho=ZC._i_((u-x)*no);"log"===to&&(ho=ZC._i_((ZC.FS(u,10)-ZC.FS(x,10))*no)),ro&&(ho=L-ho),N="lighten"===io?ZC.AQ.R0(eo,ho):ZC.AQ.JN(eo,ho)}else if("intervals"===ao){for(var go=0;go<v.length-1;go++)if(u>=v[go]&&u<v[go+1]){N=po[go];break}""===N&&u===M&&(N=po[po.length-1])}I[a]={"data-color":N,"background-color":N,"hover-state":{"background-color":N}},Z["override-tooltip"]&&(I[a].tooltip={"background-color":ZC.AQ.JN(N,15)})}h._INFO_.choropleth={aspect:ao,progression:to,intervals:y,color:eo,maxPercent:L,effect:io,minValue:x,maxValue:M,steps:v,colors:po,labels:so,mirrored:ro}}for(e["color-scale"]&&(h._INFO_["color-scale"]=!0),d=0,t=C.length;d<t;d++)if(h[a=C[d]]){var mo,Co,bo,Oo,A=h[a].type||"poly",R=0,B=("line"!==A&&"point"!==A||(R+=10),h[a].sort&&(h[a].sort&&(h[a].sort=.5),R+=h[a].sort),null),R=(null!==ZC._n_(e.style)&&(e.style["3d"]&&(B=1),null!==ZC._n_(e.style.z)&&(B=e.style.z),null!==ZC._n_(e.style.items)&&null!==ZC._n_(e.style.items[a])&&null!==ZC._n_(e.style.items[a].z)&&(B=e.style.items[a].z)),"poly"===A||"line"===A?F[a]={type:A,id:a,points:zingchart.maps.mappoints(p,l,c,f,g,h[a],h._RULES_,h._INFO_,B),label:{map:E},"z-sort":R,"z-index":R,tooltip:{},connector:{},"map-item":!0,generated:!0}:"point"===A&&(B=zingchart.maps.mappoints(p,l,c,f,g,h[a],h._RULES_,h._INFO_,B),F[a]={type:"circle",id:a,size:5,x:B[0][0],y:B[0][1],label:{map:E},"z-sort":R,"z-index":R,tooltip:{},connector:{},"map-item":!0,generated:!0}),"poly"!==A&&"line"!==A||(mo=(B=zingchart.maps.centroid(F[a].points))[0],Co=B[1],bo=B[2]),h._DEFAULTS_&&(ZC._cp_(h._DEFAULTS_._COMMON_,F[a]),"poly"===A?ZC._cp_(h._DEFAULTS_._POLY_,F[a]):"line"===A?ZC._cp_(h._DEFAULTS_._LINE_,F[a]):"point"===A&&ZC._cp_(h._DEFAULTS_._POINT_,F[a])),h[a].style&&ZC._cp_(h[a].style,F[a]),ZC._todash_(F[a]),h[a].label.text),B=h[a].tooltip.text,zo=(ZC._cp_(e.style,F[a],null,null,null,["items"]),h[a].tooltip.text||""),Zo=F[a].tooltip.text||"",Fo=(ZC._cp_(h[a].tooltip,F[a].tooltip),F[a].label.text),Fo=(ZC._cp_(h[a].label,F[a].label),Fo&&(F[a].label.text=Fo),1===zingchart.maps.CONNECTORS&&ZC._cp_(h[a].connector,F[a].connector),"poly"!==A&&"line"!==A||"auto"===F[a].label.visible&&bo<400&&(0===zingchart.maps.CONNECTORS||0===F[a].connector.points.length)&&(F[a].label.visible=!1),I[a]&&ZC._cp_(I[a],F[a]),!1);for(Oo in null!==ZC._n_(e.style)&&null!==ZC._n_(e.style.items)&&(ZC._cp_(e.style.items[a],F[a]),e.style.items[a]&&e.style.items[a].tooltip&&e.style.items[a].tooltip.text&&(zo=e.style.items[a].tooltip.text,-1===Zo.indexOf("%text")&&(Fo=!0))),F[a].tooltip.text=""===Zo||Fo?zo:Zo.replace("%text",zo),F[a])"data-"===Oo.substring(0,5)&&(F[a].tooltip.text=F[a].tooltip.text.replace("%"+Oo,F[a][Oo]),F[a].label.text=F[a].label.text.replace("%"+Oo,F[a][Oo]));if(F[a].tooltip.text=F[a].tooltip.text.replace("%short-text",R).replace("%long-text",B),F[a].label.text=F[a].label.text.replace("%short-text",R).replace("%long-text",B),zingchart.maps.CONNECTORS&&null!==ZC._n_(F[a].connector.points)){for(var Io=0,uo=F[a].connector.points.length;Io<uo;Io++)F[a].connector.points[Io]=zingchart.maps.lonlat2xy(p,l,c,f,F[a].connector.points[Io],g,{zoom:U,offsetX:P,offsetY:T});F[a].connector.points=ZC.AQ.A5L(F[a].connector.points,s.graph.x,s.graph.y)}null===ZC._n_(F[a].label.x)&&(F[a].label.x=mo+s.graph.x),null===ZC._n_(F[a].label.y)&&(F[a].label.y=Co+s.graph.y)}var xo=s.graph.width,Mo=s.graph.height,_=(e.style=e.style||{},e.style.controls||{});if(null===ZC._n_(_.visible)||ZC._b_(_.visible)){var Y=ZC._i_(_.x||"-1"),X=ZC._i_(_.y||"-1"),W=_[ZC._[7]]||"";switch(W=""!==W||-1!==Y&&-1!==X?W:"tl"){case"tl":X=Y=10;break;case"tr":Y=0+xo-25-10,X=10;break;case"bl":X=0+Mo-50-(Y=10);break;case"br":Y=0+xo-25-10,X=0+Mo-50-10}F._ZOOM_IN_={objtype:"label",id:h._INFO_.id+"_zoom_in",generated:!0,x:Y,y:X,width:25,height:25,"border-width":1,"border-color":"#999","background-color":"#eee","border-radius":"2 2 0 0","font-size":17,text:"+",tooltip:{text:"Zoom In"}},ZC._cp_(zingchart.maps._DEFAULTS_._COMMON_.tooltip,F._ZOOM_IN_.tooltip),ZC._cp_(_["zoom-in"],F._ZOOM_IN_),F._ZOOM_OUT_={objtype:"label",id:h._INFO_.id+"_zoom_out",generated:!0,x:Y,y:X+25-1,width:25,height:25,"border-width":1,"border-color":"#999","background-color":"#eee","border-radius":"0 0 2 2","font-size":17,text:"-",tooltip:{text:"Zoom Out"}},ZC._cp_(zingchart.maps._DEFAULTS_._COMMON_.tooltip,F._ZOOM_OUT_.tooltip),ZC._cp_(_["zoom-out"],F._ZOOM_OUT_)}return b=z*r/oo,!zingchart.maps.FORCESCALE&&(1.05<b||b<.95)&&(F._ALERT_={type:"circle",id:"_ALERT_",x:p+10,y:l+10,size:8,"background-color":"#c00",label:{color:"#fff",bold:!0,text:"!"},tooltip:{text:"Scaling Error<br />Use "+c+"/"+ZC._i_(f*b)+" or "+ZC._i_(c/b)+"/"+f,"background-color":"#c00","border-radius":8,color:"#fff"}}),F},zingchart.maps.exportMap=function(o,a){var t,e,i=['ZC.WG.push("maps-{{exportid}}");',"","(function() {","","if (!zingchart.maps.{{exportid}}) {","zingchart.maps.{{exportid}} = {};","};","","if (!zingchart.maps.data.{{exportid}}) {","zingchart.maps.data.{{exportid}} = {};","};","","var _COORDS_ = {","{{coords}}","};","","zingchart.maps.data.{{exportid}} = {","_GROUPS_:{","{{groups}}","},","_DEFAULTS_:zingchart.maps._DEFAULTS_,","{{items}}","};","",'zingchart.maps.upgrade("{{exportid}}");',"","})();","","zingchart.maps.{{exportid}} = function(p, ld, d) {","return zingchart.maps.convert({","loader:this,","loaderdata:ld || {},",'graphid:((typeof(p.graphid) == "undefined")?0:p.graphid),',"data:d,",'id:p.id || "{{exportid}}",','x:((typeof(p.x) == "undefined")?0:p.x),','y:((typeof(p.y) == "undefined")?0:p.y),','width:((typeof(p.width) == "undefined")?1:p.width),','height:((typeof(p.height) == "undefined")?1:p.height),','level:((typeof(p.level) == "undefined")?1:p.level),',"groups:p.groups || [],","items:p.items || [],","ignore:p.ignore || [],","bbox:p.bbox || null,","map:zingchart.maps.data.{{exportid}}","});","}"].join("\n"),r=['"{{id}}":{','coords:_COORDS_["{{id}}"],',"tooltip:{",'text:"{{text}}"',"},","cpoint:{",'x:"{{x}}", y:"{{y}}"',"},","label:{",'text:"{{id}}", x:"{{x}}", y:"{{y}}"',"}","}"].join("\n"),i=(i=i).replace(/\{\{exportid\}\}/gi,a),n=[],_=[],s=[],p=zingchart.maps.data[o];for(t in p._GROUPS_){var l='"'+t+'":["'+p._GROUPS_[t].join('","')+'"]';_.push(l)}for(e in p)if("_DEFAULTS_"!==e&&"_GROUPS_"!==e){var c=r;c=(c=(c=(c=c.replace(/\{\{id\}\}/g,e)).replace(/\{\{text\}\}/g,p[e].tooltip.text)).replace(/\{\{x\}\}/g,p[e].cpoint.x)).replace(/\{\{y\}\}/g,p[e].cpoint.y),s.push(c);for(var c='"'+e+'":',f=[],h=0;h<p[e].coords.length;h++)p[e].coords[h]?f.push([p[e].coords[h][0].toFixed(3),p[e].coords[h][1].toFixed(3)]):f.push(null);c+=JSON.stringify(f).replace(/\"/g,""),n.push(c)}return i=(i=(i=i.replace(/\{\{coords\}\}/gi,n.join(",\n"))).replace(/\{\{groups\}\}/gi,_.join(",\n"))).replace(/\{\{items\}\}/gi,s.join(",\n"))};